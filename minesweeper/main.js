/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/assets/media/click-sound-variant-1.mp3":
/*!****************************************************!*\
  !*** ./src/assets/media/click-sound-variant-1.mp3 ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "assets\\audio/click-sound-variant-1.mp3");

/***/ }),

/***/ "./src/assets/media/click-sound-variant-2.mp3":
/*!****************************************************!*\
  !*** ./src/assets/media/click-sound-variant-2.mp3 ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "assets\\audio/click-sound-variant-2.mp3");

/***/ }),

/***/ "./src/assets/media/lose-sound.mp3":
/*!*****************************************!*\
  !*** ./src/assets/media/lose-sound.mp3 ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "assets\\audio/lose-sound.mp3");

/***/ }),

/***/ "./src/assets/media/win-sound.mp3":
/*!****************************************!*\
  !*** ./src/assets/media/win-sound.mp3 ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "assets\\audio/win-sound.mp3");

/***/ }),

/***/ "./src/assets/styles/global-styles.scss":
/*!**********************************************!*\
  !*** ./src/assets/styles/global-styles.scss ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/button/button-expandable.component.scss":
/*!****************************************************************!*\
  !*** ./src/components/button/button-expandable.component.scss ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/button/button.component.scss":
/*!*****************************************************!*\
  !*** ./src/components/button/button.component.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/control-panel/control-panel.component.scss":
/*!*******************************************************************!*\
  !*** ./src/components/control-panel/control-panel.component.scss ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/info-field/info-field.component.scss":
/*!*************************************************************!*\
  !*** ./src/components/info-field/info-field.component.scss ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/input/range-input.component.scss":
/*!*********************************************************!*\
  !*** ./src/components/input/range-input.component.scss ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/minesweeper/minesweeper.component.scss":
/*!***************************************************************!*\
  !*** ./src/components/minesweeper/minesweeper.component.scss ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/modal/modal.component.scss":
/*!***************************************************!*\
  !*** ./src/components/modal/modal.component.scss ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/playground/playground.component.scss":
/*!*************************************************************!*\
  !*** ./src/components/playground/playground.component.scss ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/tile/tile.component.scss":
/*!*************************************************!*\
  !*** ./src/components/tile/tile.component.scss ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/timer/timer.component.scss":
/*!***************************************************!*\
  !*** ./src/components/timer/timer.component.scss ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/audio.component.js":
/*!*******************************************!*\
  !*** ./src/components/audio.component.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioComponent": () => (/* binding */ AudioComponent)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.component */ "./src/components/base.component.js");
/* harmony import */ var _assets_media_click_sound_variant_1_mp3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/media/click-sound-variant-1.mp3 */ "./src/assets/media/click-sound-variant-1.mp3");
/* harmony import */ var _assets_media_click_sound_variant_2_mp3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/media/click-sound-variant-2.mp3 */ "./src/assets/media/click-sound-variant-2.mp3");
/* harmony import */ var _assets_media_win_sound_mp3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets/media/win-sound.mp3 */ "./src/assets/media/win-sound.mp3");
/* harmony import */ var _assets_media_lose_sound_mp3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../assets/media/lose-sound.mp3 */ "./src/assets/media/lose-sound.mp3");







const fileList = [_assets_media_click_sound_variant_1_mp3__WEBPACK_IMPORTED_MODULE_1__["default"], _assets_media_click_sound_variant_2_mp3__WEBPACK_IMPORTED_MODULE_2__["default"], _assets_media_win_sound_mp3__WEBPACK_IMPORTED_MODULE_3__["default"], _assets_media_lose_sound_mp3__WEBPACK_IMPORTED_MODULE_4__["default"]];

class AudioComponent extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
  muted = false;
  constructor({ className = [], src = fileList } = {}) {
    super({ className: [className, 'audio'], tagName: 'audio' });
    this.sounds = src;
    this.components = this.sounds.map((file) => {
      const audio = new _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent({ tagName: 'audio' });
      audio.getElement().src = file;
      return audio;
    });
  }

  playLeftClickSound() {
    const componentToPlay = this.components[1];
    this.playSound(componentToPlay);
  }

  playRightClickSound() {
    const componentToPlay = this.components[0];
    this.playSound(componentToPlay);
  }

  playWinSound() {
    const componentToPlay = this.components[2];
    this.playSound(componentToPlay);
  }

  playLoseSound() {
    const componentToPlay = this.components[3];
    this.playSound(componentToPlay);
  }

  playSound(componentToPlay) {
    componentToPlay.getElement().muted = this.muted;
    componentToPlay.getElement().play();
  }

  mute() {
    this.muted = true;
  }

  unmute() {
    this.muted = false;
  }
}


/***/ }),

/***/ "./src/components/base.component.js":
/*!******************************************!*\
  !*** ./src/components/base.component.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseComponent": () => (/* binding */ BaseComponent)
/* harmony export */ });
class BaseComponent {
  node;
  constructor({
    tagName = 'div',
    className = [],
    textContent = '',
    parentNode,
  }) {
    this.node = document.createElement(tagName);
    this.node.textContent = textContent;
    this.addClass(className);
    if (parentNode) {
      parentNode.append(this.node);
    }
  }

  append(...components) {
    for (let component of components) {
      this.node.append(component.getElement());
    }
  }

  getElement() {
    return this.node;
  }

  addClass(className) {
    add.call(this, className);

    function add(name) {
      if (Array.isArray(name)) {
        for (let item of name) {
          add.call(this, item);
        }
      } else {
        if (name === '') {
          return;
        }
        this.node.classList.add(name);
      }
    }
  }

  removeClass(name) {
    this.node.classList.remove(name);
  }

  toggleClass(name) {
    this.node.classList.toggle(name);
  }

  destroy() {
    this.node.remove();
  }
}


/***/ }),

/***/ "./src/components/button/button-expandable.component.js":
/*!**************************************************************!*\
  !*** ./src/components/button/button-expandable.component.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ButtonExpandableComponent": () => (/* binding */ ButtonExpandableComponent)
/* harmony export */ });
/* harmony import */ var _button_expandable_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./button-expandable.component.scss */ "./src/components/button/button-expandable.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _input_range_input_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../input/range-input.component */ "./src/components/input/range-input.component.js");
/* harmony import */ var _svg_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../svg.component */ "./src/components/svg.component.js");





class ButtonExpandableComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ icon, className = [], min, max, value }) {
    super({ className: [className, 'button-expandable', 'button'] });

    if (icon) {
      this.append(new _svg_component__WEBPACK_IMPORTED_MODULE_3__.SVGComponent(icon));
    }

    this.rangeInputComponent = new _input_range_input_component__WEBPACK_IMPORTED_MODULE_2__.RangeInputComponent({ min: min, max: max, value: value });
    this.outputField = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ tagName: 'output', className: 'button-expandable__output' });
    this.append(this.outputField, this.rangeInputComponent);
  }

  getSliderValue() {
    return this.rangeInputComponent.getValue();
  }

  setSliderValue(value) {
    this.rangeInputComponent.setValue(value);
  }

  setOutputValue(value) {
    this.outputField.getElement().textContent = value;
  }
}


/***/ }),

/***/ "./src/components/button/button.component.js":
/*!***************************************************!*\
  !*** ./src/components/button/button.component.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ButtonComponent": () => (/* binding */ ButtonComponent)
/* harmony export */ });
/* harmony import */ var _button_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./button.component.scss */ "./src/components/button/button.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");



class ButtonComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  iconComponent = null;
  constructor({ textContent, a11yLabel, iconComponent, className = [] }) {
    super({ tagName: 'button', className: [className, 'button'], textContent });
    this.iconComponent = iconComponent;

    if (this.iconComponent) {
      this.append(this.iconComponent);
    }

    if (a11yLabel) {
      const label = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
        tagName: 'span',
        className: 'visually-hidden',
        textContent: a11yLabel,
      });
      this.append(label);
    }
  }

  switchIcon(newIconComponent) {
    if (this.iconComponent) {
      this.iconComponent.getElement().replaceWith(newIconComponent.getElement());
      this.iconComponent = newIconComponent;
    } else {
      this.iconComponent = newIconComponent;
      this.append(this.iconComponent);
    }
  }
}


/***/ }),

/***/ "./src/components/control-panel/control-panel.component.js":
/*!*****************************************************************!*\
  !*** ./src/components/control-panel/control-panel.component.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ControlPanelComponent": () => (/* binding */ ControlPanelComponent)
/* harmony export */ });
/* harmony import */ var _control_panel_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./control-panel.component.scss */ "./src/components/control-panel/control-panel.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _button_button_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../button/button.component */ "./src/components/button/button.component.js");
/* harmony import */ var _button_button_expandable_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../button/button-expandable.component */ "./src/components/button/button-expandable.component.js");
/* harmony import */ var _list_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../list.component */ "./src/components/list.component.js");
/* harmony import */ var _svg_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../svg.component */ "./src/components/svg.component.js");
/* harmony import */ var _enums_svg_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../enums/svg-icons */ "./src/enums/svg-icons.js");









class ControlPanelComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  newGameButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'minesweeper__new-game-button', textContent: 'new game' });

  scoreButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'button--icon', a11yLabel: 'score' });
  themeButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'button--icon', a11yLabel: 'theme' });
  soundButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'button--icon', a11yLabel: 'sound' });
  burgerButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'button--icon', a11yLabel: 'burger' });

  constructor({ className }) {
    super({ className: [className, 'control-panel'] });
    const initRangeInputValue = localStorage.getItem('sliderPosition');
    this.tileSettingButton = new _button_button_expandable_component__WEBPACK_IMPORTED_MODULE_3__.ButtonExpandableComponent({
      icon: { template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_6__.SvgIcons.TILE },
      min: 0,
      max: 2,
      value: initRangeInputValue || 0,
    });

    this.mineSettingButton = new _button_button_expandable_component__WEBPACK_IMPORTED_MODULE_3__.ButtonExpandableComponent({
      icon: { template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_6__.SvgIcons.MINE },
      min: 10,
      max: 99,
      value: initRangeInputValue || 10,
    });

    this.scoreButton.append(new _svg_component__WEBPACK_IMPORTED_MODULE_5__.SVGComponent({ template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_6__.SvgIcons.LIST }));
    this.burgerButton.append(new _svg_component__WEBPACK_IMPORTED_MODULE_5__.SVGComponent({ template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_6__.SvgIcons.BURGER }));

    const buttonGroup = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
      className: 'minesweeper__button-group',
    });
    buttonGroup.append(this.newGameButton, this.tileSettingButton, this.mineSettingButton);
    const buttonList = new _list_component__WEBPACK_IMPORTED_MODULE_4__.ListComponent({
      tagName: 'ul',
      className: 'minesweeper__button-list',
      items: [this.scoreButton, this.themeButton, this.soundButton, this.burgerButton],
    });

    this.append(buttonGroup, buttonList);
  }

  setThemeButtonIcon(iconComponent) {
    this.themeButton.switchIcon(iconComponent);
  }

  setSoundButtonIcon(iconComponent) {
    this.soundButton.switchIcon(iconComponent);
  }

  getTileSettingSliderValue() {
    return this.tileSettingButton.getSliderValue();
  }

  getMineSettingSliderValue() {
    return this.mineSettingButton.getSliderValue();
  }

  setNewGameButtonClickHandler(handler) {
    this.newGameButton.getElement().addEventListener('click', handler);
  }
  setTileSettingsButtonClickHandler(handler) {
    this.tileSettingButton.getElement().addEventListener('input', handler);
  }
  setMineSettingsButtonClickHandler(handler) {
    this.mineSettingButton.getElement().addEventListener('input', handler);
  }
  setScoreButtonClickHandler(handler) {
    this.scoreButton.getElement().addEventListener('click', handler);
  }
  setThemeButtonClickHandler(handler) {
    this.themeButton.getElement().addEventListener('click', handler);
  }
  setSoundButtonClickHandler(handler) {
    this.soundButton.getElement().addEventListener('click', handler);
  }
}


/***/ }),

/***/ "./src/components/info-field/info-field.component.js":
/*!***********************************************************!*\
  !*** ./src/components/info-field/info-field.component.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InfoFieldComponent": () => (/* binding */ InfoFieldComponent)
/* harmony export */ });
/* harmony import */ var _info_field_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./info-field.component.scss */ "./src/components/info-field/info-field.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");



class InfoFieldComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ labelText, className = [] }) {
    super({ tagName: 'p', className: [className, 'info-field'] });
    const labelComponent = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
      tagName: 'span',
      textContent: labelText,
      className: 'info-field__label',
    });
    this.valueComponent = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
      tagName: 'output',
      textContent: '00',
      className: 'info-field__value',
    });
    this.append(labelComponent, this.valueComponent);
  }

  setValue(value) {
    this.valueComponent.getElement().textContent = value;
  }
}


/***/ }),

/***/ "./src/components/input/range-input.component.js":
/*!*******************************************************!*\
  !*** ./src/components/input/range-input.component.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RangeInputComponent": () => (/* binding */ RangeInputComponent)
/* harmony export */ });
/* harmony import */ var _range_input_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./range-input.component.scss */ "./src/components/input/range-input.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");



class RangeInputComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ className = [], min = '0', max = '10', value = '0', step = '1' }) {
    super({ tagName: 'input', className: [className, 'range-slider'] });
    this.node.setAttribute('type', 'range');
    this.node.setAttribute('min', min.toString());
    this.node.setAttribute('max', max.toString());
    this.node.setAttribute('value', value.toString());
    this.node.setAttribute('step', step.toString());
  }

  getValue() {
    return this.node.value;
  }

  setValue(value) {
    this.node.value = value;
  }
}


/***/ }),

/***/ "./src/components/list.component.js":
/*!******************************************!*\
  !*** ./src/components/list.component.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ListComponent": () => (/* binding */ ListComponent)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.component */ "./src/components/base.component.js");


class ListComponent extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
  constructor({ tagName, className, items }) {
    super({ tagName, className });

    if (!items) {
      throw new Error('items have not been added');
    } else {
      for (let item of items) {
        if (item instanceof _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent) {
          const listItemComponent = new _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent({ tagName: 'li' });
          listItemComponent.append(item);
          this.append(listItemComponent);
        } else {
          throw new Error('item is not a component');
        }
      }
    }
  }
}


/***/ }),

/***/ "./src/components/minesweeper/minesweeper.component.js":
/*!*************************************************************!*\
  !*** ./src/components/minesweeper/minesweeper.component.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MinesweeperComponent": () => (/* binding */ MinesweeperComponent)
/* harmony export */ });
/* harmony import */ var _minesweeper_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./minesweeper.component.scss */ "./src/components/minesweeper/minesweeper.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");



class MinesweeperComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor() {
    super({ className: ['minesweeper'] });
  }
}


/***/ }),

/***/ "./src/components/modal/end-game-modal.component.js":
/*!**********************************************************!*\
  !*** ./src/components/modal/end-game-modal.component.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EndGameModalComponent": () => (/* binding */ EndGameModalComponent)
/* harmony export */ });
/* harmony import */ var _modal_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.component.scss */ "./src/components/modal/modal.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _button_button_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../button/button.component */ "./src/components/button/button.component.js");




class EndGameModalComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ className = [], textContent }) {
    super({ className: [className, 'modal'] });

    this.background = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__background' });
    const container = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__container' });
    const text = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__text', textContent });
    this.submitButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_2__.ButtonComponent({ className: 'modal__button', textContent: 'OK' });

    container.append(text, this.submitButton);
    this.background.append(container);
    this.append(this.background);
  }

  setSubmitClickHandler(handler) {
    this.submitButton.getElement().addEventListener('click', handler);
  }
}


/***/ }),

/***/ "./src/components/modal/score-table-modal.component.js":
/*!*************************************************************!*\
  !*** ./src/components/modal/score-table-modal.component.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ScoreTableModalComponent": () => (/* binding */ ScoreTableModalComponent)
/* harmony export */ });
/* harmony import */ var _modal_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.component.scss */ "./src/components/modal/modal.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _list_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../list.component */ "./src/components/list.component.js");
/* harmony import */ var _button_button_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../button/button.component */ "./src/components/button/button.component.js");





class ScoreTableModalComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ className = [], items } = {}) {
    super({ className: [className, 'modal'], tagName: 'article' });
    let content = null;
    if (items) {
      content = new _list_component__WEBPACK_IMPORTED_MODULE_2__.ListComponent({ tagName: 'ul', className: 'modal__list', items: items });
    } else {
      content = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__text', textContent: 'No records' });
    }

    this.background = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__background' });
    const container = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'modal__container' });
    const title = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ tagName: 'h1', className: 'modal__title', textContent: 'score table' });
    this.submitButton = new _button_button_component__WEBPACK_IMPORTED_MODULE_3__.ButtonComponent({ className: 'modal__button', textContent: 'OK' });

    container.append(title, content, this.submitButton);
    this.background.append(container);
    this.append(this.background);
  }

  setSubmitClickHandler(handler) {
    this.submitButton.getElement().addEventListener('click', handler);
  }
}


/***/ }),

/***/ "./src/components/playground/playground.component.js":
/*!***********************************************************!*\
  !*** ./src/components/playground/playground.component.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlaygroundComponent": () => (/* binding */ PlaygroundComponent)
/* harmony export */ });
/* harmony import */ var _playground_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./playground.component.scss */ "./src/components/playground/playground.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _timer_timer_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../timer/timer.component */ "./src/components/timer/timer.component.js");
/* harmony import */ var _info_field_info_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../info-field/info-field.component */ "./src/components/info-field/info-field.component.js");





class PlaygroundComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  infoBar = null;
  board = null;
  timer = null;
  steps = null;
  constructor({ className }) {
    super({ className: [className, 'playground'] });

    this.steps = new _info_field_info_field_component__WEBPACK_IMPORTED_MODULE_3__.InfoFieldComponent({ labelText: 'steps' });
    this.timer = new _timer_timer_component__WEBPACK_IMPORTED_MODULE_2__.TimerComponent({ className: 'minesweeper__timer' });
    this.infoBar = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'minesweeper__info-bar' });
    this.infoBar.append(this.timer, this.steps);

    this.board = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
      className: ['minesweeper__board', 'board'],
    });

    this.append(this.infoBar, this.board);
  }

  setStepsComponentValue(value) {
    const formattedValue = value.toString().padStart(2, '0');
    this.steps.setValue(formattedValue);
  }

  setTimerValue(seconds) {
    const formattedTime = {
      minutes: Math.floor(seconds / 60)
        .toString()
        .padStart(2, '0'),
      seconds: (seconds % 60).toString().padStart(2, '0'),
    };
    this.timer.setTime(formattedTime);
  }

  setContextHandler(handler) {
    this.node.addEventListener('contextmenu', handler);
  }
}


/***/ }),

/***/ "./src/components/svg.component.js":
/*!*****************************************!*\
  !*** ./src/components/svg.component.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SVGComponent": () => (/* binding */ SVGComponent)
/* harmony export */ });
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.component */ "./src/components/base.component.js");
/* harmony import */ var _utils_create_element_from_template__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/create-element-from-template */ "./src/utils/create-element-from-template.js");



class SVGComponent extends _base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
  constructor({ className = 'svg-icon', template }) {
    super({});
    this.node = (0,_utils_create_element_from_template__WEBPACK_IMPORTED_MODULE_1__.createElementFromTemplate)(template);
    this.node.classList.add(className);
  }
}


/***/ }),

/***/ "./src/components/tile/tile.component.js":
/*!***********************************************!*\
  !*** ./src/components/tile/tile.component.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TileComponent": () => (/* binding */ TileComponent)
/* harmony export */ });
/* harmony import */ var _tile_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tile.component.scss */ "./src/components/tile/tile.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _svg_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../svg.component */ "./src/components/svg.component.js");
/* harmony import */ var _enums_svg_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/svg-icons */ "./src/enums/svg-icons.js");





const MINE_CHAR = '*';
const COLOR_VARIANT_CLASSES = [
  'tile__content--color-variant-1st',
  'tile__content--color-variant-2nd',
  'tile__content--color-variant-3rd',
];

class TileComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ cellData, className = [] }) {
    super({ className: [className, 'tile'] });

    const { id, isMarked, isCovered, value } = cellData;
    this.isMarked = isMarked;
    this.isCovered = isCovered;
    this.value = value;
    this.id = id;

    if (this.value === MINE_CHAR) {
      this.content = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
        tagName: 'span',
        className: 'tile__content',
      });
      this.content.append(new _svg_component__WEBPACK_IMPORTED_MODULE_2__.SVGComponent({ template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_3__.SvgIcons.MINE }));
    } else {
      let colorVariantClass;
      if (this.value === MINE_CHAR) {
        colorVariantClass = '';
      } else {
        const cycle = COLOR_VARIANT_CLASSES.length;
        const index = this.value % cycle;
        colorVariantClass = COLOR_VARIANT_CLASSES[index];
      }
      this.content = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
        tagName: 'span',
        className: [colorVariantClass, 'tile__content'],
        textContent: this.value === 0 ? '' : this.value,
      });
    }
    this.append(this.content);
    if (isCovered) {
      this.cover = new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({ className: 'tile__cover' });
      if (this.isMarked) {
        this.cover.append(new _svg_component__WEBPACK_IMPORTED_MODULE_2__.SVGComponent({ template: _enums_svg_icons__WEBPACK_IMPORTED_MODULE_3__.SvgIcons.MARK }));
      }
      this.append(this.cover);
    }
  }

  setLeftClickHandler(handler) {
    this.leftClickHandler = handler;
    this.node.addEventListener('click', this.leftClickHandler);
  }

  setRightClickHandler(handler) {
    this.rigthClickHandler = handler;
    this.node.addEventListener('contextmenu', this.rigthClickHandler);
  }

  removeHandlers() {
    this.node.removeEventListener('click', this.leftClickHandler);
    this.node.removeEventListener('contextmenu', this.rigthClickHandler);
  }
}


/***/ }),

/***/ "./src/components/timer/timer.component.js":
/*!*************************************************!*\
  !*** ./src/components/timer/timer.component.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TimerComponent": () => (/* binding */ TimerComponent)
/* harmony export */ });
/* harmony import */ var _timer_component_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer.component.scss */ "./src/components/timer/timer.component.scss");
/* harmony import */ var _base_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.component */ "./src/components/base.component.js");
/* harmony import */ var _info_field_info_field_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../info-field/info-field.component */ "./src/components/info-field/info-field.component.js");




class TimerComponent extends _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent {
  constructor({ className }) {
    super({ className: [className, 'timer'] });
    this.minutesComponent = new _info_field_info_field_component__WEBPACK_IMPORTED_MODULE_2__.InfoFieldComponent({
      labelText: 'minutes',
      className: 'timer__minutes',
    });
    this.secondsComponent = new _info_field_info_field_component__WEBPACK_IMPORTED_MODULE_2__.InfoFieldComponent({
      labelText: 'seconds',
      className: 'timer__seconds',
    });
    this.append(this.minutesComponent, this.secondsComponent);
    this.append(
      new _base_component__WEBPACK_IMPORTED_MODULE_1__.BaseComponent({
        tagName: 'p',
        className: 'timer__divider',
        textContent: ':',
      })
    );
  }

  setTime({ minutes, seconds }) {
    this.minutesComponent.setValue(minutes);
    this.secondsComponent.setValue(seconds);
  }
}


/***/ }),

/***/ "./src/controllers/control-panel.controller.js":
/*!*****************************************************!*\
  !*** ./src/controllers/control-panel.controller.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ControlPanelController": () => (/* binding */ ControlPanelController)
/* harmony export */ });
/* harmony import */ var _components_control_panel_control_panel_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/control-panel/control-panel.component */ "./src/components/control-panel/control-panel.component.js");
/* harmony import */ var _components_svg_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/svg.component */ "./src/components/svg.component.js");
/* harmony import */ var _enums_svg_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/svg-icons */ "./src/enums/svg-icons.js");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/constants */ "./src/utils/constants.js");






const TILE_SLIDER_POSITION_STORAGE_KEY = 'tileSliderPosition';
const MINE_SLIDER_POSITION_STORAGE_KEY = 'mineSliderPosition';

class ControlPanelController {
  controlPanelComponent = new _components_control_panel_control_panel_component__WEBPACK_IMPORTED_MODULE_0__.ControlPanelComponent({ className: 'minesweeper__control-panel' });

  constructor(
    settings,
    container,
    onStartGameButtonClickHandler,
    onThemeChangeHandler,
    onSoundChangeHandler,
    onScoreTableButtonClickHandler
  ) {
    this.settings = settings;
    this.container = container;
    this.onStartGameButtonClickHandler = onStartGameButtonClickHandler;
    this.onThemeChangeHandler = onThemeChangeHandler;
    this.onSoundChangeHandler = onSoundChangeHandler;
    this.onScoreTableButtonClickHandler = onScoreTableButtonClickHandler;
  }

  render() {
    this.setHandlers();
    this.container.append(this.controlPanelComponent);

    this.switchSoundButtonIcon();
    this.switchThemeButtonIcon();

    const tileSliderValue = localStorage.getItem(TILE_SLIDER_POSITION_STORAGE_KEY) || 0;
    this.controlPanelComponent.tileSettingButton.setSliderValue(tileSliderValue);
    this.controlPanelComponent.tileSettingButton.setOutputValue(_utils_constants__WEBPACK_IMPORTED_MODULE_3__.SIZE_VARIANTS[tileSliderValue]);
    const mineSliderValue = localStorage.getItem(MINE_SLIDER_POSITION_STORAGE_KEY) || 10;
    this.controlPanelComponent.mineSettingButton.setSliderValue(mineSliderValue);
    this.controlPanelComponent.mineSettingButton.setOutputValue(mineSliderValue);

    window.addEventListener('beforeunload', () => {
      localStorage.setItem(TILE_SLIDER_POSITION_STORAGE_KEY, this.controlPanelComponent.getTileSettingSliderValue());
      localStorage.setItem(MINE_SLIDER_POSITION_STORAGE_KEY, this.controlPanelComponent.getMineSettingSliderValue());
    });
  }

  setHandlers() {
    this.controlPanelComponent.setNewGameButtonClickHandler(() => {
      this.onStartGameButtonClickHandler();
    });
    this.controlPanelComponent.setTileSettingsButtonClickHandler(() => {
      const value = this.controlPanelComponent.getTileSettingSliderValue();
      localStorage.setItem(TILE_SLIDER_POSITION_STORAGE_KEY, value);
      this.controlPanelComponent.tileSettingButton.setOutputValue(_utils_constants__WEBPACK_IMPORTED_MODULE_3__.SIZE_VARIANTS[value]);
    });
    this.controlPanelComponent.setMineSettingsButtonClickHandler(() => {
      const value = this.controlPanelComponent.getMineSettingSliderValue();
      localStorage.setItem(MINE_SLIDER_POSITION_STORAGE_KEY, value);
      this.controlPanelComponent.mineSettingButton.setOutputValue(value);
    });
    this.controlPanelComponent.setScoreButtonClickHandler(() => {
      this.onScoreTableButtonClickHandler();
    });
    this.controlPanelComponent.setThemeButtonClickHandler(() => {
      this.onThemeChangeHandler();
      this.switchThemeButtonIcon();
    });
    this.controlPanelComponent.setSoundButtonClickHandler(() => {
      this.onSoundChangeHandler();
      this.switchSoundButtonIcon();
    });
  }

  switchSoundButtonIcon() {
    const soundButtonIcon = new _components_svg_component__WEBPACK_IMPORTED_MODULE_1__.SVGComponent({
      template: this.settings.mute === false ? _enums_svg_icons__WEBPACK_IMPORTED_MODULE_2__.SvgIcons.MUTE : _enums_svg_icons__WEBPACK_IMPORTED_MODULE_2__.SvgIcons.UNMUTE,
    });
    this.controlPanelComponent.setSoundButtonIcon(soundButtonIcon);
  }

  switchThemeButtonIcon() {
    const themeButtonIcon = new _components_svg_component__WEBPACK_IMPORTED_MODULE_1__.SVGComponent({
      template: this.settings.theme === _utils_constants__WEBPACK_IMPORTED_MODULE_3__.ThemeValues.LIGHT ? _enums_svg_icons__WEBPACK_IMPORTED_MODULE_2__.SvgIcons.NIGHT : _enums_svg_icons__WEBPACK_IMPORTED_MODULE_2__.SvgIcons.DAY,
    });
    this.controlPanelComponent.setThemeButtonIcon(themeButtonIcon);
  }

  getTileSettingSliderValue() {
    return this.controlPanelComponent.getTileSettingSliderValue();
  }

  getMineSettingSliderValue() {
    return this.controlPanelComponent.getMineSettingSliderValue();
  }
}


/***/ }),

/***/ "./src/controllers/minesweeper.controller.js":
/*!***************************************************!*\
  !*** ./src/controllers/minesweeper.controller.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MinesweeperController": () => (/* binding */ MinesweeperController)
/* harmony export */ });
/* harmony import */ var _components_minesweeper_minesweeper_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/minesweeper/minesweeper.component */ "./src/components/minesweeper/minesweeper.component.js");
/* harmony import */ var _control_panel_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./control-panel.controller */ "./src/controllers/control-panel.controller.js");
/* harmony import */ var _playground_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./playground.controller */ "./src/controllers/playground.controller.js");
/* harmony import */ var _components_modal_end_game_modal_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/modal/end-game-modal.component */ "./src/components/modal/end-game-modal.component.js");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _components_modal_score_table_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/modal/score-table-modal.component */ "./src/components/modal/score-table-modal.component.js");
/* harmony import */ var _components_base_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/base.component */ "./src/components/base.component.js");









const DEFAULT_SETTINGS = {
  boardSize: 10,
  boardMineCount: 10,
  theme: _utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.LIGHT,
  mute: false,
};

const SCORE_TABLE_STORAGE_KEY = 'scoreTable';
const SETTINGS_STORAGE_KEY = 'settings';

class MinesweeperController {
  savedSettings = JSON.parse(localStorage.getItem(SETTINGS_STORAGE_KEY));
  settings = this.savedSettings || DEFAULT_SETTINGS;
  minesweeperComponent = new _components_minesweeper_minesweeper_component__WEBPACK_IMPORTED_MODULE_0__.MinesweeperComponent();
  controlPanelController = new _control_panel_controller__WEBPACK_IMPORTED_MODULE_1__.ControlPanelController(
    this.settings,
    this.minesweeperComponent,
    this.onStartGameButtonClickHandler.bind(this),
    this.onThemeChangeHandler.bind(this),
    this.onSoundChangeHandler.bind(this),
    this.onScoreTableButtonClickHandler.bind(this)
  );
  playgroundController = new _playground_controller__WEBPACK_IMPORTED_MODULE_2__.PlaygroundController(
    this.settings,
    this.minesweeperComponent,
    this.onGameEndHandler.bind(this)
  );
  timer = null;
  intervalId = null;
  scoreTable = JSON.parse(localStorage.getItem(SCORE_TABLE_STORAGE_KEY)) || [];

  constructor(container) {
    this.container = container;
  }

  render() {
    this.container.append(this.minesweeperComponent);
    this.controlPanelController.render();
    this.playgroundController.render();
    switch (this.settings.theme) {
      case 'light':
        this.minesweeperComponent.addClass(`theme-${_utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.LIGHT}`);
        break;
      case 'dark':
        this.minesweeperComponent.addClass(`theme-${_utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.DARK}`);
        break;
    }

    window.addEventListener('beforeunload', () => {
      localStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(this.settings));
    });
  }

  onThemeChangeHandler() {
    const prevThemeClassName = `theme-${this.settings.theme}`;
    this.minesweeperComponent.toggleClass(prevThemeClassName);

    this.settings.theme = this.settings.theme === _utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.LIGHT ? _utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.DARK : _utils_constants__WEBPACK_IMPORTED_MODULE_4__.ThemeValues.LIGHT;

    const newThemeClassName = `theme-${this.settings.theme}`;
    this.minesweeperComponent.toggleClass(newThemeClassName);
  }

  onSoundChangeHandler() {
    this.settings.mute = !this.settings.mute;
    this.playgroundController.applySoundSettings();
  }

  onScoreTableButtonClickHandler() {
    if (this.scoreTable.length > 0) {
      const list = this.scoreTable.map((item) => {
        const { name, time, steps } = item;
        const content = `${name} | ${time} | ${steps} moves`;
        const note = new _components_base_component__WEBPACK_IMPORTED_MODULE_6__.BaseComponent({ textContent: content });
        return note;
      });
      this.scoreModal = new _components_modal_score_table_modal_component__WEBPACK_IMPORTED_MODULE_5__.ScoreTableModalComponent({ items: list });
    } else {
      this.scoreModal = new _components_modal_score_table_modal_component__WEBPACK_IMPORTED_MODULE_5__.ScoreTableModalComponent();
    }
    this.scoreModal.setSubmitClickHandler(this.onScoreTableSubmitClickHandler.bind(this));
    this.minesweeperComponent.append(this.scoreModal);
  }

  onStartGameButtonClickHandler() {
    const tileSliderValue = this.controlPanelController.getTileSettingSliderValue();
    const mineSliderValue = this.controlPanelController.getMineSettingSliderValue();

    this.settings.boardSize = _utils_constants__WEBPACK_IMPORTED_MODULE_4__.SIZE_VARIANTS[tileSliderValue];
    this.settings.boardMineCount = mineSliderValue;
    this.playgroundController.restartGame();
  }

  onEndGameSubmitClickHandler() {
    this.endGameModal.destroy();
    this.endGameModal = null;
  }

  onScoreTableSubmitClickHandler() {
    this.scoreModal.destroy();
    this.scoreModal = null;
  }

  onGameEndHandler(sign, steps, timer) {
    this.playgroundController.stopTimer();
    switch (sign) {
      case _utils_constants__WEBPACK_IMPORTED_MODULE_4__.WIN_SIGN: {
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;
        const minuteSubstr = `${minutes === 0 ? '' : `${minutes}  ${minutes > 1 ? 'minutes' : 'minute'}`}`;
        const secondSubstr = `${seconds === 0 ? '' : `${seconds}  ${seconds > 1 ? 'seconds' : 'second'}`}`;
        const timeSubtring = `${minuteSubstr} ${secondSubstr}`;
        const winText = _utils_constants__WEBPACK_IMPORTED_MODULE_4__.WIN_TEXT.replace('## seconds', timeSubtring).replace('#N', steps);
        this.endGameModal = new _components_modal_end_game_modal_component__WEBPACK_IMPORTED_MODULE_3__.EndGameModalComponent({ textContent: winText });
        const scoreRecord = {
          name: new Date().toLocaleTimeString('en-US', { hour12: false }),
          time: `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`,
          steps: steps,
        };
        this.scoreTable.unshift(scoreRecord);
        this.scoreTable.length = 10;
        this.scoreTable = this.scoreTable.filter((score) => score !== null);
        localStorage.setItem(SCORE_TABLE_STORAGE_KEY, JSON.stringify(this.scoreTable));
        break;
      }
      case _utils_constants__WEBPACK_IMPORTED_MODULE_4__.LOSE_SIGN:
        this.endGameModal = new _components_modal_end_game_modal_component__WEBPACK_IMPORTED_MODULE_3__.EndGameModalComponent({ textContent: _utils_constants__WEBPACK_IMPORTED_MODULE_4__.LOSE_TEXT });
    }
    this.endGameModal.setSubmitClickHandler(this.onEndGameSubmitClickHandler.bind(this));
    this.minesweeperComponent.append(this.endGameModal);
  }
}


/***/ }),

/***/ "./src/controllers/playground.controller.js":
/*!**************************************************!*\
  !*** ./src/controllers/playground.controller.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PlaygroundController": () => (/* binding */ PlaygroundController)
/* harmony export */ });
/* harmony import */ var _components_base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/base.component */ "./src/components/base.component.js");
/* harmony import */ var _components_playground_playground_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/playground/playground.component */ "./src/components/playground/playground.component.js");
/* harmony import */ var _components_tile_tile_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/tile/tile.component */ "./src/components/tile/tile.component.js");
/* harmony import */ var _models_minesweeper_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/minesweeper.model */ "./src/models/minesweeper.model.js");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _utils_get_matrix_position__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/get-matrix-position */ "./src/utils/get-matrix-position.js");
/* harmony import */ var _components_audio_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/audio.component */ "./src/components/audio.component.js");








const TIMER_STORAGE_KEY = 'timer';
const STEPS_STORAGE_KEY = 'steps';

class PlaygroundController {
  playground = null;
  tileComponents = [];
  steps = 0;
  timer = 0;
  intervalId = null;
  isGameStarted = false;
  soundEffectsComponent = new _components_audio_component__WEBPACK_IMPORTED_MODULE_6__.AudioComponent();

  constructor(settings, container, onEndGameHandler) {
    this.settings = settings;
    this.container = container;
    this.onEndGameHandler = onEndGameHandler;
    this.dataChangeHandler = this.dataChangeHandler.bind(this);
    this.onStartGameHandler = this.onStartGameHandler.bind(this);
    this.model = new _models_minesweeper_model__WEBPACK_IMPORTED_MODULE_3__.MinesweeperModel();
  }

  render() {
    window.addEventListener('beforeunload', () => {
      if (this.isGameStarted) {
        this.model.saveInStorage();
        localStorage.setItem(TIMER_STORAGE_KEY, this.timer);
        localStorage.setItem(STEPS_STORAGE_KEY, this.steps);
      }
    });
    const savedModel = this.model.loadFromStorage();
    if (savedModel) {
      this.startGame();
      return;
    }

    this.isGameStarted = false;
    this.model.setModel(this.settings, true);
    this.model.setOnDataChangeHandler(this.onStartGameHandler);
    const data = this.model.getData();
    this.createTileComponents(data);
    this.renderPlayground();
  }

  createTileComponents(data) {
    this.tileComponents = data.map((dataRow) => {
      return dataRow.map((cellData) => this.createTileComponent(cellData));
    });
  }

  renderPlayground() {
    if (this.playground) {
      this.playground.destroy();
    }

    this.playground = new _components_playground_playground_component__WEBPACK_IMPORTED_MODULE_1__.PlaygroundComponent({ className: 'minesweeper__playground' });
    this.tileComponents.forEach((dataRow) => {
      const line = new _components_base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent({ className: 'minesweeper__tile-row' });
      for (let tileComponent of dataRow) {
        line.append(tileComponent);
      }
      this.playground.board.append(line);
    });

    this.container.append(this.playground);
    this.playground.setContextHandler((evt) => evt.preventDefault());
  }

  startGame(componentToIgnore) {
    this.isGameStarted = true;
    const ignoreCellCoorditanes = (0,_utils_get_matrix_position__WEBPACK_IMPORTED_MODULE_5__.getMatrixComponentPosiiton)(this.tileComponents, componentToIgnore);
    this.model.setModel(this.settings, false, ignoreCellCoorditanes);
    this.model.setOnDataChangeHandler(this.dataChangeHandler);
    const data = this.model.getData();
    this.createTileComponents(data);
    this.renderPlayground();
    const savedTimer = localStorage.getItem(TIMER_STORAGE_KEY);
    const savedSteps = localStorage.getItem(STEPS_STORAGE_KEY);
    this.timer = +savedTimer || 0;
    this.steps = +savedSteps || 0;
    this.playground.setTimerValue(this.timer);
    this.playground.setStepsComponentValue(this.steps);
    this.applySoundSettings();
    this.startTimer();
    this.model.saveInStorage();
  }

  dataChangeHandler(newData) {
    this.rerenderTile(newData);
  }

  onStartGameHandler(cellToIgnore) {
    this.startGame(cellToIgnore);
  }

  createTileComponent(cellData) {
    let tileComponent = new _components_tile_tile_component__WEBPACK_IMPORTED_MODULE_2__.TileComponent({ cellData });
    tileComponent.setLeftClickHandler(() => {
      if (!this.isGameStarted) {
        const tilePosition = (0,_utils_get_matrix_position__WEBPACK_IMPORTED_MODULE_5__.getMatrixComponentPosiiton)(this.tileComponents, tileComponent);
        this.startGame(tileComponent);
        tileComponent = this.tileComponents[tilePosition.lineIndex][tilePosition.cellIndex];
      }

      if (tileComponent.isCovered) {
        this.steps++;
        this.setStepsField();
        this.soundEffectsComponent.playLeftClickSound();
      }
      this.uncoverTile(tileComponent);
      if (tileComponent.value === '*') {
        this.showMines();
        this.stopPlaygroundEvents();
        this.isGameStarted = false;
        localStorage.removeItem(STEPS_STORAGE_KEY);
        localStorage.removeItem(TIMER_STORAGE_KEY);
        this.model.eraseFromStorage();
        this.onEndGameHandler(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.LOSE_SIGN);
        this.soundEffectsComponent.playLoseSound();
      }

      const coveredTilesCount = this.tileComponents.flat(1).filter((component) => component.isCovered).length;
      const isAllTilesUncovered = coveredTilesCount - this.settings.boardMineCount === 0;
      if (isAllTilesUncovered) {
        this.stopPlaygroundEvents();
        this.isGameStarted = false;
        localStorage.removeItem(STEPS_STORAGE_KEY);
        localStorage.removeItem(TIMER_STORAGE_KEY);
        this.model.eraseFromStorage();
        this.onEndGameHandler(_utils_constants__WEBPACK_IMPORTED_MODULE_4__.WIN_SIGN, this.steps, this.timer);
        this.soundEffectsComponent.playWinSound();
      }
    });
    tileComponent.setRightClickHandler((evt) => {
      evt.preventDefault();
      if (this.isGameStarted) {
        this.soundEffectsComponent.playRightClickSound();
        this.model.updateData({ id: tileComponent.id, isMarked: !tileComponent.isMarked });
      }
    });
    return tileComponent;
  }

  restartGame() {
    this.model.eraseFromStorage();
    this.stopTimer();
    localStorage.removeItem(TIMER_STORAGE_KEY);
    localStorage.removeItem(STEPS_STORAGE_KEY);
    this.render();
  }

  rerenderTile(newData) {
    let targetComponent;
    for (let line of this.tileComponents) {
      targetComponent = line.find((component) => component.id === newData.id);
      if (targetComponent) {
        break;
      }
    }

    const { lineIndex, cellIndex } = (0,_utils_get_matrix_position__WEBPACK_IMPORTED_MODULE_5__.getMatrixComponentPosiiton)(this.tileComponents, targetComponent);
    const newTileComponent = this.createTileComponent(newData);
    targetComponent.node.replaceWith(newTileComponent.node);
    targetComponent.destroy();
    targetComponent = null;
    this.tileComponents[lineIndex][cellIndex] = newTileComponent;
  }

  uncoverTile(tileComponent) {
    if (tileComponent.value === 0 && tileComponent.isCovered) {
      const componentPosition = (0,_utils_get_matrix_position__WEBPACK_IMPORTED_MODULE_5__.getMatrixComponentPosiiton)(this.tileComponents, tileComponent);
      const { cellIndex, lineIndex } = componentPosition;
      this.model.updateData({ id: tileComponent.id, isCovered: false });
      const size = this.tileComponents.length;
      _utils_constants__WEBPACK_IMPORTED_MODULE_4__.neighbourLocationMap.forEach((location) => {
        if (
          lineIndex + location[0] >= 0 &&
          lineIndex + location[0] < size &&
          cellIndex + location[1] >= 0 &&
          cellIndex + location[1] < size
        ) {
          const neighbour = this.tileComponents[lineIndex + location[0]][cellIndex + location[1]];
          this.uncoverTile(neighbour);
        }
      });
    } else {
      this.model.updateData({ id: tileComponent.id, isCovered: false });
    }
  }

  showMines() {
    const mines = this.tileComponents.flat(1).filter((component) => component.value === '*');
    mines.forEach((component) => this.uncoverTile(component));
  }

  stopPlaygroundEvents() {
    this.tileComponents.flat(1).forEach((component) => component.removeHandlers());
  }

  applySoundSettings() {
    if (this.settings.mute) {
      this.soundEffectsComponent.mute();
    } else {
      this.soundEffectsComponent.unmute();
    }
  }

  setTimerField({ minutes, seconds }) {
    this.playground.getTimerComponent().setTime({ minutes, seconds });
  }

  setStepsField() {
    this.playground.setStepsComponentValue(this.steps);
  }

  stopTimer() {
    clearInterval(this.intervalId);
  }

  startTimer() {
    this.intervalId = setInterval(() => {
      this.timer += 1;
      this.playground.setTimerValue(this.timer);
    }, 1000);
  }

  getModel() {
    return this.model;
  }
}


/***/ }),

/***/ "./src/enums/svg-icons.js":
/*!********************************!*\
  !*** ./src/enums/svg-icons.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SvgIcons": () => (/* binding */ SvgIcons)
/* harmony export */ });
const SvgIcons = {
  DAY: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd">
    <path d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-6 4a6 6 0 1 1 12 0 6 6 0 0 1-12 0ZM12 0a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V1a1 1 0 0 1 1-1ZM12 20a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1ZM3.513 3.513a1 1 0 0 1 1.414 0l1.42 1.42a1 1 0 0 1-1.414 1.414l-1.42-1.42a1 1 0 0 1 0-1.414ZM17.653 17.653a1 1 0 0 1 1.414 0l1.42 1.42a1 1 0 0 1-1.414 1.414l-1.42-1.42a1 1 0 0 1 0-1.414ZM0 12a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1ZM20 12a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2h-2a1 1 0 0 1-1-1ZM6.347 17.653a1 1 0 0 1 0 1.414l-1.42 1.42a1 1 0 0 1-1.414-1.414l1.42-1.42a1 1 0 0 1 1.414 0ZM20.487 3.513a1 1 0 0 1 0 1.414l-1.42 1.42a1 1 0 1 1-1.414-1.414l1.42-1.42a1 1 0 0 1 1.414 0Z"/>
  </g>
  <defs>
    <clipPath id="a">
      <path fill="#fff" d="M0 0h24v24H0z"/>
    </clipPath>
  </defs>
</svg>
`,
  LIST: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.87868 1.87868C4.44129 1.31607 5.20435 1 6 1H14C14.2652 1 14.5196 1.10536 14.7071 1.29289L20.7071 7.29289C20.8946 7.48043 21 7.73478 21 8V20C21 20.7957 20.6839 21.5587 20.1213 22.1213C19.5587 22.6839 18.7957 23 18 23H6C5.20435 23 4.44129 22.6839 3.87868 22.1213C3.31607 21.5587 3 20.7957 3 20V4C3 3.20435 3.31607 2.44129 3.87868 1.87868ZM6 3C5.73478 3 5.48043 3.10536 5.29289 3.29289C5.10536 3.48043 5 3.73478 5 4V20C5 20.2652 5.10536 20.5196 5.29289 20.7071C5.48043 20.8946 5.73478 21 6 21H18C18.2652 21 18.5196 20.8946 18.7071 20.7071C18.8946 20.5196 19 20.2652 19 20V9H14C13.4477 9 13 8.55228 13 8V3H6ZM15 4.41421L17.5858 7H15V4.41421ZM7 9C7 8.44772 7.44772 8 8 8H10C10.5523 8 11 8.44772 11 9C11 9.55228 10.5523 10 10 10H8C7.44772 10 7 9.55228 7 9ZM7 13C7 12.4477 7.44772 12 8 12H16C16.5523 12 17 12.4477 17 13C17 13.5523 16.5523 14 16 14H8C7.44772 14 7 13.5523 7 13ZM7 17C7 16.4477 7.44772 16 8 16H16C16.5523 16 17 16.4477 17 17C17 17.5523 16.5523 18 16 18H8C7.44772 18 7 17.5523 7 17Z"/>
  </svg>
  `,
  MARK: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M20.707 5.293a1 1 0 0 1 0 1.414l-11 11a1 1 0 0 1-1.414 0l-5-5a1 1 0 1 1 1.414-1.414L9 15.586 19.293 5.293a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"/>
</svg>
`,
  MINE: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <path fill="none" d="M0 0h24v24H0z"/>
  <path fill-rule="evenodd" d="M23 12a1 1 0 0 1-1 1h-4.09a5.69 5.69 0 0 1-1 2.48l.06.06 2.83 2.83a1 1 0 0 1-1.42 1.42L15.53 17l-.06-.06a5.69 5.69 0 0 1-2.48 1A.28.28 0 0 1 13 18v4a1 1 0 0 1-2 0v-4a.28.28 0 0 1 0-.09 5.69 5.69 0 0 1-2.48-1l-.05.09-2.83 2.78a1 1 0 0 1-1.42-1.42l2.83-2.83.06-.06a5.69 5.69 0 0 1-1-2.48H2a1 1 0 0 1 0-2h4.09a5.69 5.69 0 0 1 1-2.48l-.06-.06-2.81-2.81a1 1 0 0 1 1.42-1.42l2.83 2.83.06.06a5.69 5.69 0 0 1 2.48-1A.28.28 0 0 1 11 6V2a1 1 0 0 1 2 0v4a.28.28 0 0 1 0 .09 5.69 5.69 0 0 1 2.48 1l.06-.06 2.83-2.83a1 1 0 1 1 1.42 1.42L17 8.47l-.06.06a5.69 5.69 0 0 1 1 2.48H22a1 1 0 0 1 1 .99Z"/>
</svg>
`,
  NIGHT: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M12.081 2.509a1 1 0 0 1-.067 1.085 6 6 0 0 0 8.392 8.392 1 1 0 0 1 1.59.896A10 10 0 1 1 11.118 2.004a1 1 0 0 1 .963.505Zm-2.765 1.93a8 8 0 1 0 10.245 10.245A7.999 7.999 0 0 1 9.316 4.439Z" clip-rule="evenodd"/>
</svg>
`,
  SETTINGS: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd">
    <path d="M12 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-4 2a4 4 0 1 1 8 0 4 4 0 0 1-8 0Z"/>
    <path d="M12 2a1 1 0 0 0-1 1v.174a2.65 2.65 0 0 1-1.606 2.425 1 1 0 0 1-.264.073 2.65 2.65 0 0 1-2.73-.607l-.007-.008-.06-.06a1.003 1.003 0 0 0-1.415 0h-.001a1 1 0 0 0 0 1.415l.068.069a2.65 2.65 0 0 1 .542 2.894 2.65 2.65 0 0 1-2.414 1.705H3a1 1 0 0 0 0 2h.174a2.65 2.65 0 0 1 2.423 1.601 2.65 2.65 0 0 1-.532 2.918l-.008.008-.06.06a1.003 1.003 0 0 0-.217 1.09 1 1 0 0 0 .217.325v.001a.999.999 0 0 0 1.415 0l.069-.068a2.65 2.65 0 0 1 2.894-.543 2.65 2.65 0 0 1 1.705 2.415V21a1 1 0 0 0 2 0V20.826a2.65 2.65 0 0 1 1.601-2.423 2.65 2.65 0 0 1 2.918.532l.008.008.06.06a1.002 1.002 0 0 0 1.415 0h.001a1 1 0 0 0 0-1.416l-.068-.068a2.65 2.65 0 0 1-.532-2.918A2.65 2.65 0 0 1 20.906 13H21a1 1 0 0 0 0-2H20.826a2.65 2.65 0 0 1-2.425-1.606.999.999 0 0 1-.073-.264 2.65 2.65 0 0 1 .607-2.73l.008-.007.06-.06a1.002 1.002 0 0 0 0-1.415v-.001a1 1 0 0 0-1.416 0l-.068.068a2.65 2.65 0 0 1-2.918.532A2.65 2.65 0 0 1 13 3.094V3a1 1 0 0 0-1-1ZM9.879.879A3 3 0 0 1 15 3v.087a.65.65 0 0 0 .394.594l.01.004a.65.65 0 0 0 .714-.127l.055-.055a3 3 0 0 1 4.895 3.27c-.151.365-.372.696-.65.974l-.056.055a.65.65 0 0 0-.127.714c.028.064.05.13.064.2a.65.65 0 0 0 .534.284H21a3 3 0 1 1 0 6h-.087a.65.65 0 0 0-.594.394l-.004.01a.65.65 0 0 0 .127.714l.055.055a3.002 3.002 0 0 1 0 4.245l-.707-.708.707.707a3 3 0 0 1-4.244 0l-.055-.055a.65.65 0 0 0-.714-.127l-.01.004a.649.649 0 0 0-.394.593V21a3 3 0 0 1-6 0v-.076a.65.65 0 0 0-.425-.585.955.955 0 0 1-.059-.024.65.65 0 0 0-.714.127l-.054.055a3.002 3.002 0 1 1-4.245-4.244l.055-.055a.65.65 0 0 0 .127-.714l-.004-.01a.649.649 0 0 0-.594-.394H3a3 3 0 0 1 0-6h.076a.65.65 0 0 0 .585-.425l.024-.059a.65.65 0 0 0-.127-.714l-.055-.054a3 3 0 1 1 4.244-4.245l.055.055a.65.65 0 0 0 .714.127 1 1 0 0 1 .2-.064A.65.65 0 0 0 9 3.167V3A3 3 0 0 1 9.879.879Z"/>
  </g>
  <defs>
    <clipPath id="a">
      <path fill="#fff" d="M0 0h24v24H0z"/>
    </clipPath>
  </defs>
</svg>
`,
  MUTE: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M11.433 4.099A1 1 0 0 1 12 5v14a1 1 0 0 1-1.625.78L5.65 16H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.65l4.725-3.78a1 1 0 0 1 1.058-.121ZM10 7.08l-3.375 2.7A1 1 0 0 1 6 10H3v4h3a1 1 0 0 1 .625.22L10 16.92V7.08ZM23.707 8.293a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"/>
  <path fill-rule="evenodd" d="M16.293 8.293a1 1 0 0 1 1.414 0l6 6a1 1 0 0 1-1.414 1.414l-6-6a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"/>
</svg>
`,
  UNMUTE: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M11.433 4.099a1 1 0 0 1 .567.9v14a1 1 0 0 1-1.625.782L5.65 16H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.65l4.725-3.78a1 1 0 0 1 1.058-.121ZM10 7.08l-3.375 2.7A1 1 0 0 1 6 10H3v4h3a1 1 0 0 1 .625.22L10 16.92V7.08ZM18.363 4.223a1 1 0 0 1 1.414 0 11 11 0 0 1 0 15.554 1 1 0 1 1-1.414-1.414 9 9 0 0 0 0-12.726 1 1 0 0 1 0-1.414Zm-3.53 3.53a1 1 0 0 1 1.414 0 6 6 0 0 1 0 8.484 1 1 0 1 1-1.414-1.414 4 4 0 0 0 0-5.656 1 1 0 0 1 0-1.414Z" clip-rule="evenodd"/>
</svg>
`,
  BURGER: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M2.358 12.045a1 1 0 0 1 1-1h18a1 1 0 0 1 0 2h-18a1 1 0 0 1-1-1ZM2.358 6.045a1 1 0 0 1 1-1h18a1 1 0 0 1 0 2h-18a1 1 0 0 1-1-1ZM2.358 18.045a1 1 0 0 1 1-1h18a1 1 0 0 1 0 2h-18a1 1 0 0 1-1-1Z" clip-rule="evenodd"/>
</svg>
`,
  TILE: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
  <path fill-rule="evenodd" d="M18 5H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1ZM6 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H6Z" clip-rule="evenodd"/>
</svg>
`,
};


/***/ }),

/***/ "./src/models/minesweeper.model.js":
/*!*****************************************!*\
  !*** ./src/models/minesweeper.model.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MinesweeperModel": () => (/* binding */ MinesweeperModel)
/* harmony export */ });
/* harmony import */ var _utils_get_random_int__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/get-random-int */ "./src/utils/get-random-int.js");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/constants */ "./src/utils/constants.js");



const MODEL_STORAGE_KEY = 'minesweeperModel';
const MINE_CHAR = '*';

const isLoadSave = true;

class MinesweeperModel {
  cells = [];
  onDataChangeHandler = null;

  setModel(settings, setZeroCells, cellToIgnoreCoordinates) {
    const isHasSave = !!this.loadFromStorage();
    if (isHasSave && isLoadSave) {
      this.cells = JSON.parse(localStorage.getItem(MODEL_STORAGE_KEY));
    } else {
      this.cells = this.generateCellData(settings, setZeroCells, cellToIgnoreCoordinates);
    }
  }

  saveInStorage() {
    localStorage.setItem(MODEL_STORAGE_KEY, JSON.stringify(this.cells));
  }

  eraseFromStorage() {
    localStorage.removeItem(MODEL_STORAGE_KEY);
  }

  loadFromStorage() {
    return localStorage.getItem(MODEL_STORAGE_KEY);
  }

  getData() {
    return this.cells;
  }

  generateCellData({ boardSize, boardMineCount }, setZeroCells, cellToIgnoreCoordinates) {
    const mineMatrix = new Array(boardSize).fill(0).map(() => new Array(boardSize).fill(0));

    if (setZeroCells) {
      let cellCounter = 0;
      return mineMatrix.map((line) => {
        return line.map((cell) => {
          const cellData = { id: cellCounter, isMarked: false, isCovered: true, value: cell };
          cellCounter += 1;
          return cellData;
        });
      });
    }

    let mineCount = 0;
    while (mineCount < boardMineCount) {
      const lineIndex = (0,_utils_get_random_int__WEBPACK_IMPORTED_MODULE_0__.getRandomInt)(0, boardSize - 1);
      const cellIndex = (0,_utils_get_random_int__WEBPACK_IMPORTED_MODULE_0__.getRandomInt)(0, boardSize - 1);
      if (mineMatrix[lineIndex][cellIndex] !== MINE_CHAR) {
        if (!(lineIndex === cellToIgnoreCoordinates.lineIndex && cellIndex === cellToIgnoreCoordinates.cellIndex)) {
          mineMatrix[lineIndex][cellIndex] = MINE_CHAR;
          mineCount += 1;
        }
      }
    }

    let cellCounter = 0;
    const dataMatrix = mineMatrix.map((line, lineIndex) => {
      return line.map((cell, cellIndex) => {
        if (cell === MINE_CHAR) {
          const cellData = { id: cellCounter, isMarked: false, isCovered: true, value: cell };
          cellCounter += 1;
          return cellData;
        }

        let neighboursCount = 0;
        _utils_constants__WEBPACK_IMPORTED_MODULE_1__.neighbourLocationMap.forEach((location) => {
          let neighbour;
          if (
            lineIndex + location[0] >= 0 &&
            lineIndex + location[0] < boardSize &&
            cellIndex + location[1] >= 0 &&
            cellIndex + location[1] < boardSize
          ) {
            neighbour = mineMatrix[lineIndex + location[0]][cellIndex + location[1]];
          }
          neighboursCount += neighbour === MINE_CHAR ? 1 : 0;
        });
        const cellData = { id: cellCounter, isMarked: false, isCovered: true, value: neighboursCount };
        cellCounter += 1;
        return cellData;
      });
    });

    return dataMatrix;
  }

  updateData(data) {
    let targetCell;
    for (let line of this.cells) {
      targetCell = line.find((cell) => cell.id === data.id);
      if (targetCell) {
        break;
      }
    }
    for (let prop in data) {
      targetCell[prop] = data[prop] !== undefined ? data[prop] : targetCell[prop];
    }
    this.onDataChangeHandler(targetCell);
  }

  setOnDataChangeHandler(handler) {
    this.onDataChangeHandler = handler;
  }
}


/***/ }),

/***/ "./src/pages/home.js":
/*!***************************!*\
  !*** ./src/pages/home.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HomePage": () => (/* binding */ HomePage)
/* harmony export */ });
/* harmony import */ var _components_base_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/base.component */ "./src/components/base.component.js");
/* harmony import */ var _controllers_minesweeper_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/minesweeper.controller */ "./src/controllers/minesweeper.controller.js");



class HomePage extends _components_base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent {
  constructor() {
    super({});
    const pageWrapper = new _components_base_component__WEBPACK_IMPORTED_MODULE_0__.BaseComponent({ className: 'page-wrapper' });
    this.append(pageWrapper);

    const minesweeperController = new _controllers_minesweeper_controller__WEBPACK_IMPORTED_MODULE_1__.MinesweeperController(pageWrapper);
    minesweeperController.render();
  }
}


/***/ }),

/***/ "./src/utils/constants.js":
/*!********************************!*\
  !*** ./src/utils/constants.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LOSE_SIGN": () => (/* binding */ LOSE_SIGN),
/* harmony export */   "LOSE_TEXT": () => (/* binding */ LOSE_TEXT),
/* harmony export */   "SIZE_VARIANTS": () => (/* binding */ SIZE_VARIANTS),
/* harmony export */   "ThemeValues": () => (/* binding */ ThemeValues),
/* harmony export */   "WIN_SIGN": () => (/* binding */ WIN_SIGN),
/* harmony export */   "WIN_TEXT": () => (/* binding */ WIN_TEXT),
/* harmony export */   "neighbourLocationMap": () => (/* binding */ neighbourLocationMap)
/* harmony export */ });
const ThemeValues = {
  LIGHT: 'light',
  DARK: 'dark',
};

const SIZE_VARIANTS = [10, 15, 25];

const WIN_SIGN = 'win';
const LOSE_SIGN = 'lose';
const WIN_TEXT = 'Hooray! You found all mines in ## seconds and #N moves!';
const LOSE_TEXT = 'Game over. Try again';

/* eslint-disable prettier/prettier */
const neighbourLocationMap = [
  [-1, -1], [-1, +0], [-1, +1],
  [+0, -1], /*    */  [+0, +1],
  [+1, -1], [+1, +0], [+1, +1],
];
/* eslint-enable prettier/prettier */


/***/ }),

/***/ "./src/utils/create-element-from-template.js":
/*!***************************************************!*\
  !*** ./src/utils/create-element-from-template.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createElementFromTemplate": () => (/* binding */ createElementFromTemplate)
/* harmony export */ });
function createElementFromTemplate(template) {
  const container = document.createElement('div');
  container.innerHTML = template;
  return container.firstElementChild;
}


/***/ }),

/***/ "./src/utils/get-matrix-position.js":
/*!******************************************!*\
  !*** ./src/utils/get-matrix-position.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getMatrixComponentPosiiton": () => (/* binding */ getMatrixComponentPosiiton)
/* harmony export */ });
function getMatrixComponentPosiiton(matrix, component) {
  let lineIndex;
  let cellIndex;
  for (let i = 0; i < matrix.length; i++) {
    for (let j = 0; j < matrix.length; j++) {
      if (matrix[i][j] === component) {
        lineIndex = i;
        cellIndex = j;
        break;
      }
    }
  }
  return { lineIndex, cellIndex };
}


/***/ }),

/***/ "./src/utils/get-random-int.js":
/*!*************************************!*\
  !*** ./src/utils/get-random-int.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getRandomInt": () => (/* binding */ getRandomInt)
/* harmony export */ });
function getRandomInt(min, max) {
  return Math.round(min + Math.random() * (max - min));
}


/***/ }),

/***/ "./src/assets/fonts/Roboto-Regular.woff":
/*!**********************************************!*\
  !*** ./src/assets/fonts/Roboto-Regular.woff ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets\\fonts\\Roboto-Regular.woff";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _assets_styles_global_styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets/styles/global-styles.scss */ "./src/assets/styles/global-styles.scss");
/* harmony import */ var _assets_fonts_Roboto_Regular_woff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets/fonts/Roboto-Regular.woff */ "./src/assets/fonts/Roboto-Regular.woff");
/* harmony import */ var _pages_home__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pages/home */ "./src/pages/home.js");




const home = new _pages_home__WEBPACK_IMPORTED_MODULE_2__.HomePage();
document.body.append(home.getElement());

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLGlFQUFlLHFCQUF1Qiw0Q0FBNEM7Ozs7Ozs7Ozs7Ozs7O0FDQWxGLGlFQUFlLHFCQUF1Qiw0Q0FBNEM7Ozs7Ozs7Ozs7Ozs7O0FDQWxGLGlFQUFlLHFCQUF1QixpQ0FBaUM7Ozs7Ozs7Ozs7Ozs7O0FDQXZFLGlFQUFlLHFCQUF1QixnQ0FBZ0M7Ozs7Ozs7Ozs7O0FDQXRFOzs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBaUQ7O0FBRThCO0FBQ0E7QUFDdEI7QUFDRTs7QUFFM0Qsa0JBQWtCLCtFQUFzQixFQUFFLCtFQUFzQixFQUFFLG1FQUFZLEVBQUUsb0VBQWE7O0FBRXRGLDZCQUE2QiwwREFBYTtBQUNqRDtBQUNBLGdCQUFnQixpQ0FBaUMsSUFBSTtBQUNyRCxZQUFZLG1EQUFtRDtBQUMvRDtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFhLEdBQUcsa0JBQWtCO0FBQzFEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUNyRE87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0RDRDO0FBQ007QUFDbUI7QUFDckI7O0FBRXpDLHdDQUF3QywwREFBYTtBQUM1RCxnQkFBZ0IsdUNBQXVDO0FBQ3ZELFlBQVksdURBQXVEOztBQUVuRTtBQUNBLHNCQUFzQix3REFBWTtBQUNsQzs7QUFFQSxtQ0FBbUMsNkVBQW1CLEdBQUcsa0NBQWtDO0FBQzNGLDJCQUEyQiwwREFBYSxHQUFHLDJEQUEyRDtBQUN0RztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0JpQztBQUNpQjs7QUFFM0MsOEJBQThCLDBEQUFhO0FBQ2xEO0FBQ0EsZ0JBQWdCLHVEQUF1RDtBQUN2RSxZQUFZLGtFQUFrRTtBQUM5RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IsMERBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEN3Qzs7QUFFVTtBQUNXO0FBQ3FCO0FBQ2hDO0FBQ0Y7QUFDQzs7QUFFMUMsb0NBQW9DLDBEQUFhO0FBQ3hELHNCQUFzQixxRUFBZSxHQUFHLG9FQUFvRTs7QUFFNUcsb0JBQW9CLHFFQUFlLEdBQUcsK0NBQStDO0FBQ3JGLG9CQUFvQixxRUFBZSxHQUFHLCtDQUErQztBQUNyRixvQkFBb0IscUVBQWUsR0FBRywrQ0FBK0M7QUFDckYscUJBQXFCLHFFQUFlLEdBQUcsZ0RBQWdEOztBQUV2RixnQkFBZ0IsV0FBVztBQUMzQixZQUFZLHlDQUF5QztBQUNyRDtBQUNBLGlDQUFpQywwRkFBeUI7QUFDMUQsY0FBYyxVQUFVLDJEQUFhLEVBQUU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCxpQ0FBaUMsMEZBQXlCO0FBQzFELGNBQWMsVUFBVSwyREFBYSxFQUFFO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsZ0NBQWdDLHdEQUFZLEdBQUcsVUFBVSwyREFBYSxFQUFFO0FBQ3hFLGlDQUFpQyx3REFBWSxHQUFHLFVBQVUsNkRBQWUsRUFBRTs7QUFFM0UsNEJBQTRCLDBEQUFhO0FBQ3pDO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLDBEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEZxQztBQUNhOztBQUUzQyxpQ0FBaUMsMERBQWE7QUFDckQsZ0JBQWdCLDJCQUEyQjtBQUMzQyxZQUFZLG9EQUFvRDtBQUNoRSwrQkFBK0IsMERBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDhCQUE4QiwwREFBYTtBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QnNDO0FBQ1k7O0FBRTNDLGtDQUFrQywwREFBYTtBQUN0RCxnQkFBZ0IsZ0VBQWdFO0FBQ2hGLFlBQVksMERBQTBEO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQmlEOztBQUUxQyw0QkFBNEIsMERBQWE7QUFDaEQsZ0JBQWdCLDJCQUEyQjtBQUMzQyxZQUFZLG9CQUFvQjs7QUFFaEM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDRCQUE0QiwwREFBYTtBQUN6Qyx3Q0FBd0MsMERBQWEsR0FBRyxlQUFlO0FBQ3ZFO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCc0M7QUFDWTs7QUFFM0MsbUNBQW1DLDBEQUFhO0FBQ3ZEO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUGdDO0FBQ2tCO0FBQ1c7O0FBRXRELG9DQUFvQywwREFBYTtBQUN4RCxnQkFBZ0IsNkJBQTZCO0FBQzdDLFlBQVksaUNBQWlDOztBQUU3QywwQkFBMEIsMERBQWEsR0FBRyxnQ0FBZ0M7QUFDMUUsMEJBQTBCLDBEQUFhLEdBQUcsK0JBQStCO0FBQ3pFLHFCQUFxQiwwREFBYSxHQUFHLHVDQUF1QztBQUM1RSw0QkFBNEIscUVBQWUsR0FBRywrQ0FBK0M7O0FBRTdGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJnQztBQUNrQjtBQUNBO0FBQ1c7O0FBRXRELHVDQUF1QywwREFBYTtBQUMzRCxnQkFBZ0Isd0JBQXdCLElBQUk7QUFDNUMsWUFBWSxxREFBcUQ7QUFDakU7QUFDQTtBQUNBLG9CQUFvQiwwREFBYSxHQUFHLHVEQUF1RDtBQUMzRixNQUFNO0FBQ04sb0JBQW9CLDBEQUFhLEdBQUcscURBQXFEO0FBQ3pGOztBQUVBLDBCQUEwQiwwREFBYSxHQUFHLGdDQUFnQztBQUMxRSwwQkFBMEIsMERBQWEsR0FBRywrQkFBK0I7QUFDekUsc0JBQXNCLDBEQUFhLEdBQUcsc0VBQXNFO0FBQzVHLDRCQUE0QixxRUFBZSxHQUFHLCtDQUErQzs7QUFFN0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1QnFDO0FBQ2E7QUFDUTtBQUNjOztBQUVqRSxrQ0FBa0MsMERBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQixZQUFZLHNDQUFzQzs7QUFFbEQscUJBQXFCLGdGQUFrQixHQUFHLG9CQUFvQjtBQUM5RCxxQkFBcUIsa0VBQWMsR0FBRyxpQ0FBaUM7QUFDdkUsdUJBQXVCLDBEQUFhLEdBQUcsb0NBQW9DO0FBQzNFOztBQUVBLHFCQUFxQiwwREFBYTtBQUNsQztBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0NpRDtBQUNpQzs7QUFFM0UsMkJBQTJCLDBEQUFhO0FBQy9DLGdCQUFnQixrQ0FBa0M7QUFDbEQsWUFBWTtBQUNaLGdCQUFnQiw4RkFBeUI7QUFDekM7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVCtCO0FBQ21CO0FBQ0Y7QUFDQzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPLDRCQUE0QiwwREFBYTtBQUNoRCxnQkFBZ0IsMEJBQTBCO0FBQzFDLFlBQVksZ0NBQWdDOztBQUU1QyxZQUFZLGlDQUFpQztBQUM3QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QiwwREFBYTtBQUN0QztBQUNBO0FBQ0EsT0FBTztBQUNQLDhCQUE4Qix3REFBWSxHQUFHLFVBQVUsMkRBQWEsRUFBRTtBQUN0RSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBEQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMERBQWEsR0FBRywwQkFBMEI7QUFDakU7QUFDQSw4QkFBOEIsd0RBQVksR0FBRyxVQUFVLDJEQUFhLEVBQUU7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkVnQztBQUNrQjtBQUNzQjs7QUFFakUsNkJBQTZCLDBEQUFhO0FBQ2pELGdCQUFnQixXQUFXO0FBQzNCLFlBQVksaUNBQWlDO0FBQzdDLGdDQUFnQyxnRkFBa0I7QUFDbEQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0MsZ0ZBQWtCO0FBQ2xEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFVBQVUsMERBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUEsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3QjRGO0FBQ2pDO0FBQ2I7QUFDRztBQUNFOztBQUVuRDtBQUNBOztBQUVPO0FBQ1AsOEJBQThCLG9HQUFxQixHQUFHLHlDQUF5Qzs7QUFFL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnRUFBZ0UsMkRBQWE7QUFDN0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDJEQUFhO0FBQy9FLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxnQ0FBZ0MsbUVBQVk7QUFDNUMsK0NBQStDLDJEQUFhLEdBQUcsNkRBQWU7QUFDOUUsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxnQ0FBZ0MsbUVBQVk7QUFDNUMsd0NBQXdDLCtEQUFpQixHQUFHLDREQUFjLEdBQUcsMERBQVk7QUFDekYsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEd1RjtBQUNuQjtBQUNMO0FBQ3NCO0FBQ007QUFDeEM7QUFDd0M7QUFDOUI7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQWlCO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQSw2QkFBNkIsK0ZBQW9CO0FBQ2pELCtCQUErQiw2RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0VBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsK0RBQWlCLENBQUM7QUFDdEU7QUFDQTtBQUNBLG9EQUFvRCw4REFBZ0IsQ0FBQztBQUNyRTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSx3Q0FBd0Msb0JBQW9CO0FBQzVEOztBQUVBLGtEQUFrRCwrREFBaUIsR0FBRyw4REFBZ0IsR0FBRywrREFBaUI7O0FBRTFHLHVDQUF1QyxvQkFBb0I7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDLDJCQUEyQixNQUFNLElBQUksTUFBTSxJQUFJLE9BQU87QUFDdEQseUJBQXlCLHFFQUFhLEdBQUcsc0JBQXNCO0FBQy9EO0FBQ0EsT0FBTztBQUNQLDRCQUE0QixtR0FBd0IsR0FBRyxhQUFhO0FBQ3BFLE1BQU07QUFDTiw0QkFBNEIsbUdBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEIsMkRBQWE7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQVE7QUFDbkI7QUFDQTtBQUNBLGdDQUFnQyx3QkFBd0IsVUFBVSxFQUFFLG1DQUFtQyxFQUFFO0FBQ3pHLGdDQUFnQyx3QkFBd0IsVUFBVSxFQUFFLG1DQUFtQyxFQUFFO0FBQ3pHLGdDQUFnQyxjQUFjLEVBQUUsYUFBYTtBQUM3RCx3QkFBd0IsOERBQWdCO0FBQ3hDLGdDQUFnQyw2RkFBcUIsR0FBRyxzQkFBc0I7QUFDOUU7QUFDQSx5REFBeUQsZUFBZTtBQUN4RSxtQkFBbUIsb0NBQW9DLEdBQUcsb0NBQW9DO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVEQUFTO0FBQ3BCLGdDQUFnQyw2RkFBcUIsR0FBRyxhQUFhLHVEQUFTLEVBQUU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVJNkQ7QUFDdUI7QUFDbEI7QUFDSDtBQUNnQjtBQUNMO0FBQ1g7O0FBRS9EO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdUVBQWM7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1RUFBZ0I7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLDRGQUFtQixHQUFHLHNDQUFzQztBQUN0RjtBQUNBLHVCQUF1QixxRUFBYSxHQUFHLG9DQUFvQztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0Msc0ZBQTBCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCLDBFQUFhLEdBQUcsVUFBVTtBQUN0RDtBQUNBO0FBQ0EsNkJBQTZCLHNGQUEwQjtBQUN2RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVM7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFRO0FBQ3RDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MseURBQXlEO0FBQ3pGO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLHVCQUF1QixFQUFFLHNGQUEwQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQyxzRkFBMEI7QUFDMUQsY0FBYyx1QkFBdUI7QUFDckMsOEJBQThCLHdDQUF3QztBQUN0RTtBQUNBLE1BQU0sMEVBQTRCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04sOEJBQThCLHdDQUF3QztBQUN0RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBLGtCQUFrQixrQkFBa0I7QUFDcEMsa0RBQWtELGtCQUFrQjtBQUNwRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUM1T087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxRHVEO0FBQ0c7O0FBRTFEO0FBQ0E7O0FBRUE7O0FBRU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLDJCQUEyQjtBQUNoRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLG1FQUFZO0FBQ3BDLHdCQUF3QixtRUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRLDBFQUE0QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0c2RDtBQUNpQjs7QUFFdkUsdUJBQXVCLHFFQUFhO0FBQzNDO0FBQ0EsWUFBWTtBQUNaLDRCQUE0QixxRUFBYSxHQUFHLDJCQUEyQjtBQUN2RTs7QUFFQSxzQ0FBc0Msc0ZBQXFCO0FBQzNEO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWk87QUFDUDtBQUNBO0FBQ0E7O0FBRU87O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRVA7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQ2xCTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUNKTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7Ozs7Ozs7Ozs7Ozs7OztBQ2JPO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7VUNGQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQSxDQUFDOzs7OztXQ1BEOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7V0NOQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7Ozs7Ozs7Ozs7Ozs7QUNsQjRDO0FBQ0E7QUFDSjs7QUFFeEMsaUJBQWlCLGlEQUFRO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvYXNzZXRzL21lZGlhL2NsaWNrLXNvdW5kLXZhcmlhbnQtMS5tcDMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvYXNzZXRzL21lZGlhL2NsaWNrLXNvdW5kLXZhcmlhbnQtMi5tcDMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvYXNzZXRzL21lZGlhL2xvc2Utc291bmQubXAzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2Fzc2V0cy9tZWRpYS93aW4tc291bmQubXAzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2Fzc2V0cy9zdHlsZXMvZ2xvYmFsLXN0eWxlcy5zY3NzPzA4NTQiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9idXR0b24vYnV0dG9uLWV4cGFuZGFibGUuY29tcG9uZW50LnNjc3M/MTg5ZCIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2J1dHRvbi9idXR0b24uY29tcG9uZW50LnNjc3M/MmM0NCIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2wtcGFuZWwvY29udHJvbC1wYW5lbC5jb21wb25lbnQuc2Nzcz80OTBkIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvaW5mby1maWVsZC9pbmZvLWZpZWxkLmNvbXBvbmVudC5zY3NzP2EwYjciLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9pbnB1dC9yYW5nZS1pbnB1dC5jb21wb25lbnQuc2Nzcz81NzNkIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvbWluZXN3ZWVwZXIvbWluZXN3ZWVwZXIuY29tcG9uZW50LnNjc3M/OWYxZiIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL21vZGFsL21vZGFsLmNvbXBvbmVudC5zY3NzPzcwOWQiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9wbGF5Z3JvdW5kL3BsYXlncm91bmQuY29tcG9uZW50LnNjc3M/MjQ4MiIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL3RpbGUvdGlsZS5jb21wb25lbnQuc2Nzcz80Y2I4Iiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvdGltZXIvdGltZXIuY29tcG9uZW50LnNjc3M/MDJlYSIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2F1ZGlvLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2Jhc2UuY29tcG9uZW50LmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9uL2J1dHRvbi1leHBhbmRhYmxlLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2J1dHRvbi9idXR0b24uY29tcG9uZW50LmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbC1wYW5lbC9jb250cm9sLXBhbmVsLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL2luZm8tZmllbGQvaW5mby1maWVsZC5jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9pbnB1dC9yYW5nZS1pbnB1dC5jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9saXN0LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL21pbmVzd2VlcGVyL21pbmVzd2VlcGVyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL21vZGFsL2VuZC1nYW1lLW1vZGFsLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL21vZGFsL3Njb3JlLXRhYmxlLW1vZGFsLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL3BsYXlncm91bmQvcGxheWdyb3VuZC5jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29tcG9uZW50cy9zdmcuY29tcG9uZW50LmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2NvbXBvbmVudHMvdGlsZS90aWxlLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb21wb25lbnRzL3RpbWVyL3RpbWVyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb250cm9sbGVycy9jb250cm9sLXBhbmVsLmNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvY29udHJvbGxlcnMvbWluZXN3ZWVwZXIuY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9jb250cm9sbGVycy9wbGF5Z3JvdW5kLmNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvZW51bXMvc3ZnLWljb25zLmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL21vZGVscy9taW5lc3dlZXBlci5tb2RlbC5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy9wYWdlcy9ob21lLmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci8uL3NyYy91dGlscy9jcmVhdGUtZWxlbWVudC1mcm9tLXRlbXBsYXRlLmpzIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL3V0aWxzL2dldC1tYXRyaXgtcG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvLi9zcmMvdXRpbHMvZ2V0LXJhbmRvbS1pbnQuanMiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21pbmVzd2VlcGVyL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbWluZXN3ZWVwZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9taW5lc3dlZXBlci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21pbmVzd2VlcGVyL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL21pbmVzd2VlcGVyLy4vc3JjL2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYXNzZXRzXFxcXGF1ZGlvL2NsaWNrLXNvdW5kLXZhcmlhbnQtMS5tcDNcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYXNzZXRzXFxcXGF1ZGlvL2NsaWNrLXNvdW5kLXZhcmlhbnQtMi5tcDNcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYXNzZXRzXFxcXGF1ZGlvL2xvc2Utc291bmQubXAzXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImFzc2V0c1xcXFxhdWRpby93aW4tc291bmQubXAzXCI7IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4vYmFzZS5jb21wb25lbnQnO1xuXG5pbXBvcnQgY2xpY2tWYXJpYW50MVNvdW5kRmlsZSBmcm9tICcuLi9hc3NldHMvbWVkaWEvY2xpY2stc291bmQtdmFyaWFudC0xLm1wMyc7XG5pbXBvcnQgY2xpY2tWYXJpYW50MlNvdW5kRmlsZSBmcm9tICcuLi9hc3NldHMvbWVkaWEvY2xpY2stc291bmQtdmFyaWFudC0yLm1wMyc7XG5pbXBvcnQgd2luU291bmRGaWxlIGZyb20gJy4uL2Fzc2V0cy9tZWRpYS93aW4tc291bmQubXAzJztcbmltcG9ydCBsb3NlU291bmRGaWxlIGZyb20gJy4uL2Fzc2V0cy9tZWRpYS9sb3NlLXNvdW5kLm1wMyc7XG5cbmNvbnN0IGZpbGVMaXN0ID0gW2NsaWNrVmFyaWFudDFTb3VuZEZpbGUsIGNsaWNrVmFyaWFudDJTb3VuZEZpbGUsIHdpblNvdW5kRmlsZSwgbG9zZVNvdW5kRmlsZV07XG5cbmV4cG9ydCBjbGFzcyBBdWRpb0NvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBtdXRlZCA9IGZhbHNlO1xuICBjb25zdHJ1Y3Rvcih7IGNsYXNzTmFtZSA9IFtdLCBzcmMgPSBmaWxlTGlzdCB9ID0ge30pIHtcbiAgICBzdXBlcih7IGNsYXNzTmFtZTogW2NsYXNzTmFtZSwgJ2F1ZGlvJ10sIHRhZ05hbWU6ICdhdWRpbycgfSk7XG4gICAgdGhpcy5zb3VuZHMgPSBzcmM7XG4gICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy5zb3VuZHMubWFwKChmaWxlKSA9PiB7XG4gICAgICBjb25zdCBhdWRpbyA9IG5ldyBCYXNlQ29tcG9uZW50KHsgdGFnTmFtZTogJ2F1ZGlvJyB9KTtcbiAgICAgIGF1ZGlvLmdldEVsZW1lbnQoKS5zcmMgPSBmaWxlO1xuICAgICAgcmV0dXJuIGF1ZGlvO1xuICAgIH0pO1xuICB9XG5cbiAgcGxheUxlZnRDbGlja1NvdW5kKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudFRvUGxheSA9IHRoaXMuY29tcG9uZW50c1sxXTtcbiAgICB0aGlzLnBsYXlTb3VuZChjb21wb25lbnRUb1BsYXkpO1xuICB9XG5cbiAgcGxheVJpZ2h0Q2xpY2tTb3VuZCgpIHtcbiAgICBjb25zdCBjb21wb25lbnRUb1BsYXkgPSB0aGlzLmNvbXBvbmVudHNbMF07XG4gICAgdGhpcy5wbGF5U291bmQoY29tcG9uZW50VG9QbGF5KTtcbiAgfVxuXG4gIHBsYXlXaW5Tb3VuZCgpIHtcbiAgICBjb25zdCBjb21wb25lbnRUb1BsYXkgPSB0aGlzLmNvbXBvbmVudHNbMl07XG4gICAgdGhpcy5wbGF5U291bmQoY29tcG9uZW50VG9QbGF5KTtcbiAgfVxuXG4gIHBsYXlMb3NlU291bmQoKSB7XG4gICAgY29uc3QgY29tcG9uZW50VG9QbGF5ID0gdGhpcy5jb21wb25lbnRzWzNdO1xuICAgIHRoaXMucGxheVNvdW5kKGNvbXBvbmVudFRvUGxheSk7XG4gIH1cblxuICBwbGF5U291bmQoY29tcG9uZW50VG9QbGF5KSB7XG4gICAgY29tcG9uZW50VG9QbGF5LmdldEVsZW1lbnQoKS5tdXRlZCA9IHRoaXMubXV0ZWQ7XG4gICAgY29tcG9uZW50VG9QbGF5LmdldEVsZW1lbnQoKS5wbGF5KCk7XG4gIH1cblxuICBtdXRlKCkge1xuICAgIHRoaXMubXV0ZWQgPSB0cnVlO1xuICB9XG5cbiAgdW5tdXRlKCkge1xuICAgIHRoaXMubXV0ZWQgPSBmYWxzZTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEJhc2VDb21wb25lbnQge1xuICBub2RlO1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdGFnTmFtZSA9ICdkaXYnLFxuICAgIGNsYXNzTmFtZSA9IFtdLFxuICAgIHRleHRDb250ZW50ID0gJycsXG4gICAgcGFyZW50Tm9kZSxcbiAgfSkge1xuICAgIHRoaXMubm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgdGhpcy5ub2RlLnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgdGhpcy5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICBwYXJlbnROb2RlLmFwcGVuZCh0aGlzLm5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGFwcGVuZCguLi5jb21wb25lbnRzKSB7XG4gICAgZm9yIChsZXQgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMubm9kZS5hcHBlbmQoY29tcG9uZW50LmdldEVsZW1lbnQoKSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlO1xuICB9XG5cbiAgYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgYWRkLmNhbGwodGhpcywgY2xhc3NOYW1lKTtcblxuICAgIGZ1bmN0aW9uIGFkZChuYW1lKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIG5hbWUpIHtcbiAgICAgICAgICBhZGQuY2FsbCh0aGlzLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QuYWRkKG5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUNsYXNzKG5hbWUpIHtcbiAgICB0aGlzLm5vZGUuY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgfVxuXG4gIHRvZ2dsZUNsYXNzKG5hbWUpIHtcbiAgICB0aGlzLm5vZGUuY2xhc3NMaXN0LnRvZ2dsZShuYW1lKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5ub2RlLnJlbW92ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vYnV0dG9uLWV4cGFuZGFibGUuY29tcG9uZW50LnNjc3MnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFJhbmdlSW5wdXRDb21wb25lbnQgfSBmcm9tICcuLi9pbnB1dC9yYW5nZS1pbnB1dC5jb21wb25lbnQnO1xuaW1wb3J0IHsgU1ZHQ29tcG9uZW50IH0gZnJvbSAnLi4vc3ZnLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBCdXR0b25FeHBhbmRhYmxlQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgaWNvbiwgY2xhc3NOYW1lID0gW10sIG1pbiwgbWF4LCB2YWx1ZSB9KSB7XG4gICAgc3VwZXIoeyBjbGFzc05hbWU6IFtjbGFzc05hbWUsICdidXR0b24tZXhwYW5kYWJsZScsICdidXR0b24nXSB9KTtcblxuICAgIGlmIChpY29uKSB7XG4gICAgICB0aGlzLmFwcGVuZChuZXcgU1ZHQ29tcG9uZW50KGljb24pKTtcbiAgICB9XG5cbiAgICB0aGlzLnJhbmdlSW5wdXRDb21wb25lbnQgPSBuZXcgUmFuZ2VJbnB1dENvbXBvbmVudCh7IG1pbjogbWluLCBtYXg6IG1heCwgdmFsdWU6IHZhbHVlIH0pO1xuICAgIHRoaXMub3V0cHV0RmllbGQgPSBuZXcgQmFzZUNvbXBvbmVudCh7IHRhZ05hbWU6ICdvdXRwdXQnLCBjbGFzc05hbWU6ICdidXR0b24tZXhwYW5kYWJsZV9fb3V0cHV0JyB9KTtcbiAgICB0aGlzLmFwcGVuZCh0aGlzLm91dHB1dEZpZWxkLCB0aGlzLnJhbmdlSW5wdXRDb21wb25lbnQpO1xuICB9XG5cbiAgZ2V0U2xpZGVyVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2VJbnB1dENvbXBvbmVudC5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgc2V0U2xpZGVyVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnJhbmdlSW5wdXRDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xuICB9XG5cbiAgc2V0T3V0cHV0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLm91dHB1dEZpZWxkLmdldEVsZW1lbnQoKS50ZXh0Q29udGVudCA9IHZhbHVlO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vYnV0dG9uLmNvbXBvbmVudC5zY3NzJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBCdXR0b25Db21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgaWNvbkNvbXBvbmVudCA9IG51bGw7XG4gIGNvbnN0cnVjdG9yKHsgdGV4dENvbnRlbnQsIGExMXlMYWJlbCwgaWNvbkNvbXBvbmVudCwgY2xhc3NOYW1lID0gW10gfSkge1xuICAgIHN1cGVyKHsgdGFnTmFtZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogW2NsYXNzTmFtZSwgJ2J1dHRvbiddLCB0ZXh0Q29udGVudCB9KTtcbiAgICB0aGlzLmljb25Db21wb25lbnQgPSBpY29uQ29tcG9uZW50O1xuXG4gICAgaWYgKHRoaXMuaWNvbkNvbXBvbmVudCkge1xuICAgICAgdGhpcy5hcHBlbmQodGhpcy5pY29uQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICBpZiAoYTExeUxhYmVsKSB7XG4gICAgICBjb25zdCBsYWJlbCA9IG5ldyBCYXNlQ29tcG9uZW50KHtcbiAgICAgICAgdGFnTmFtZTogJ3NwYW4nLFxuICAgICAgICBjbGFzc05hbWU6ICd2aXN1YWxseS1oaWRkZW4nLFxuICAgICAgICB0ZXh0Q29udGVudDogYTExeUxhYmVsLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmFwcGVuZChsYWJlbCk7XG4gICAgfVxuICB9XG5cbiAgc3dpdGNoSWNvbihuZXdJY29uQ29tcG9uZW50KSB7XG4gICAgaWYgKHRoaXMuaWNvbkNvbXBvbmVudCkge1xuICAgICAgdGhpcy5pY29uQ29tcG9uZW50LmdldEVsZW1lbnQoKS5yZXBsYWNlV2l0aChuZXdJY29uQ29tcG9uZW50LmdldEVsZW1lbnQoKSk7XG4gICAgICB0aGlzLmljb25Db21wb25lbnQgPSBuZXdJY29uQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmljb25Db21wb25lbnQgPSBuZXdJY29uQ29tcG9uZW50O1xuICAgICAgdGhpcy5hcHBlbmQodGhpcy5pY29uQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAnLi9jb250cm9sLXBhbmVsLmNvbXBvbmVudC5zY3NzJztcblxuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4uL2J1dHRvbi9idXR0b24uY29tcG9uZW50JztcbmltcG9ydCB7IEJ1dHRvbkV4cGFuZGFibGVDb21wb25lbnQgfSBmcm9tICcuLi9idXR0b24vYnV0dG9uLWV4cGFuZGFibGUuY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RDb21wb25lbnQgfSBmcm9tICcuLi9saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTVkdDb21wb25lbnQgfSBmcm9tICcuLi9zdmcuY29tcG9uZW50JztcbmltcG9ydCB7IFN2Z0ljb25zIH0gZnJvbSAnLi4vLi4vZW51bXMvc3ZnLWljb25zJztcblxuZXhwb3J0IGNsYXNzIENvbnRyb2xQYW5lbENvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBuZXdHYW1lQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21pbmVzd2VlcGVyX19uZXctZ2FtZS1idXR0b24nLCB0ZXh0Q29udGVudDogJ25ldyBnYW1lJyB9KTtcblxuICBzY29yZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoeyBjbGFzc05hbWU6ICdidXR0b24tLWljb24nLCBhMTF5TGFiZWw6ICdzY29yZScgfSk7XG4gIHRoZW1lQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ2J1dHRvbi0taWNvbicsIGExMXlMYWJlbDogJ3RoZW1lJyB9KTtcbiAgc291bmRCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHsgY2xhc3NOYW1lOiAnYnV0dG9uLS1pY29uJywgYTExeUxhYmVsOiAnc291bmQnIH0pO1xuICBidXJnZXJCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHsgY2xhc3NOYW1lOiAnYnV0dG9uLS1pY29uJywgYTExeUxhYmVsOiAnYnVyZ2VyJyB9KTtcblxuICBjb25zdHJ1Y3Rvcih7IGNsYXNzTmFtZSB9KSB7XG4gICAgc3VwZXIoeyBjbGFzc05hbWU6IFtjbGFzc05hbWUsICdjb250cm9sLXBhbmVsJ10gfSk7XG4gICAgY29uc3QgaW5pdFJhbmdlSW5wdXRWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzbGlkZXJQb3NpdGlvbicpO1xuICAgIHRoaXMudGlsZVNldHRpbmdCdXR0b24gPSBuZXcgQnV0dG9uRXhwYW5kYWJsZUNvbXBvbmVudCh7XG4gICAgICBpY29uOiB7IHRlbXBsYXRlOiBTdmdJY29ucy5USUxFIH0sXG4gICAgICBtaW46IDAsXG4gICAgICBtYXg6IDIsXG4gICAgICB2YWx1ZTogaW5pdFJhbmdlSW5wdXRWYWx1ZSB8fCAwLFxuICAgIH0pO1xuXG4gICAgdGhpcy5taW5lU2V0dGluZ0J1dHRvbiA9IG5ldyBCdXR0b25FeHBhbmRhYmxlQ29tcG9uZW50KHtcbiAgICAgIGljb246IHsgdGVtcGxhdGU6IFN2Z0ljb25zLk1JTkUgfSxcbiAgICAgIG1pbjogMTAsXG4gICAgICBtYXg6IDk5LFxuICAgICAgdmFsdWU6IGluaXRSYW5nZUlucHV0VmFsdWUgfHwgMTAsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNjb3JlQnV0dG9uLmFwcGVuZChuZXcgU1ZHQ29tcG9uZW50KHsgdGVtcGxhdGU6IFN2Z0ljb25zLkxJU1QgfSkpO1xuICAgIHRoaXMuYnVyZ2VyQnV0dG9uLmFwcGVuZChuZXcgU1ZHQ29tcG9uZW50KHsgdGVtcGxhdGU6IFN2Z0ljb25zLkJVUkdFUiB9KSk7XG5cbiAgICBjb25zdCBidXR0b25Hcm91cCA9IG5ldyBCYXNlQ29tcG9uZW50KHtcbiAgICAgIGNsYXNzTmFtZTogJ21pbmVzd2VlcGVyX19idXR0b24tZ3JvdXAnLFxuICAgIH0pO1xuICAgIGJ1dHRvbkdyb3VwLmFwcGVuZCh0aGlzLm5ld0dhbWVCdXR0b24sIHRoaXMudGlsZVNldHRpbmdCdXR0b24sIHRoaXMubWluZVNldHRpbmdCdXR0b24pO1xuICAgIGNvbnN0IGJ1dHRvbkxpc3QgPSBuZXcgTGlzdENvbXBvbmVudCh7XG4gICAgICB0YWdOYW1lOiAndWwnLFxuICAgICAgY2xhc3NOYW1lOiAnbWluZXN3ZWVwZXJfX2J1dHRvbi1saXN0JyxcbiAgICAgIGl0ZW1zOiBbdGhpcy5zY29yZUJ1dHRvbiwgdGhpcy50aGVtZUJ1dHRvbiwgdGhpcy5zb3VuZEJ1dHRvbiwgdGhpcy5idXJnZXJCdXR0b25dLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hcHBlbmQoYnV0dG9uR3JvdXAsIGJ1dHRvbkxpc3QpO1xuICB9XG5cbiAgc2V0VGhlbWVCdXR0b25JY29uKGljb25Db21wb25lbnQpIHtcbiAgICB0aGlzLnRoZW1lQnV0dG9uLnN3aXRjaEljb24oaWNvbkNvbXBvbmVudCk7XG4gIH1cblxuICBzZXRTb3VuZEJ1dHRvbkljb24oaWNvbkNvbXBvbmVudCkge1xuICAgIHRoaXMuc291bmRCdXR0b24uc3dpdGNoSWNvbihpY29uQ29tcG9uZW50KTtcbiAgfVxuXG4gIGdldFRpbGVTZXR0aW5nU2xpZGVyVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZVNldHRpbmdCdXR0b24uZ2V0U2xpZGVyVmFsdWUoKTtcbiAgfVxuXG4gIGdldE1pbmVTZXR0aW5nU2xpZGVyVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWluZVNldHRpbmdCdXR0b24uZ2V0U2xpZGVyVmFsdWUoKTtcbiAgfVxuXG4gIHNldE5ld0dhbWVCdXR0b25DbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMubmV3R2FtZUJ1dHRvbi5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyKTtcbiAgfVxuICBzZXRUaWxlU2V0dGluZ3NCdXR0b25DbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMudGlsZVNldHRpbmdCdXR0b24uZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlcik7XG4gIH1cbiAgc2V0TWluZVNldHRpbmdzQnV0dG9uQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLm1pbmVTZXR0aW5nQnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZXIpO1xuICB9XG4gIHNldFNjb3JlQnV0dG9uQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLnNjb3JlQnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICB9XG4gIHNldFRoZW1lQnV0dG9uQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLnRoZW1lQnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICB9XG4gIHNldFNvdW5kQnV0dG9uQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLnNvdW5kQnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vaW5mby1maWVsZC5jb21wb25lbnQuc2Nzcyc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS5jb21wb25lbnQnO1xuXG5leHBvcnQgY2xhc3MgSW5mb0ZpZWxkQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgbGFiZWxUZXh0LCBjbGFzc05hbWUgPSBbXSB9KSB7XG4gICAgc3VwZXIoeyB0YWdOYW1lOiAncCcsIGNsYXNzTmFtZTogW2NsYXNzTmFtZSwgJ2luZm8tZmllbGQnXSB9KTtcbiAgICBjb25zdCBsYWJlbENvbXBvbmVudCA9IG5ldyBCYXNlQ29tcG9uZW50KHtcbiAgICAgIHRhZ05hbWU6ICdzcGFuJyxcbiAgICAgIHRleHRDb250ZW50OiBsYWJlbFRleHQsXG4gICAgICBjbGFzc05hbWU6ICdpbmZvLWZpZWxkX19sYWJlbCcsXG4gICAgfSk7XG4gICAgdGhpcy52YWx1ZUNvbXBvbmVudCA9IG5ldyBCYXNlQ29tcG9uZW50KHtcbiAgICAgIHRhZ05hbWU6ICdvdXRwdXQnLFxuICAgICAgdGV4dENvbnRlbnQ6ICcwMCcsXG4gICAgICBjbGFzc05hbWU6ICdpbmZvLWZpZWxkX192YWx1ZScsXG4gICAgfSk7XG4gICAgdGhpcy5hcHBlbmQobGFiZWxDb21wb25lbnQsIHRoaXMudmFsdWVDb21wb25lbnQpO1xuICB9XG5cbiAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlQ29tcG9uZW50LmdldEVsZW1lbnQoKS50ZXh0Q29udGVudCA9IHZhbHVlO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vcmFuZ2UtaW5wdXQuY29tcG9uZW50LnNjc3MnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UuY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIFJhbmdlSW5wdXRDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoeyBjbGFzc05hbWUgPSBbXSwgbWluID0gJzAnLCBtYXggPSAnMTAnLCB2YWx1ZSA9ICcwJywgc3RlcCA9ICcxJyB9KSB7XG4gICAgc3VwZXIoeyB0YWdOYW1lOiAnaW5wdXQnLCBjbGFzc05hbWU6IFtjbGFzc05hbWUsICdyYW5nZS1zbGlkZXInXSB9KTtcbiAgICB0aGlzLm5vZGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3JhbmdlJyk7XG4gICAgdGhpcy5ub2RlLnNldEF0dHJpYnV0ZSgnbWluJywgbWluLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMubm9kZS5zZXRBdHRyaWJ1dGUoJ21heCcsIG1heC50b1N0cmluZygpKTtcbiAgICB0aGlzLm5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMubm9kZS5zZXRBdHRyaWJ1dGUoJ3N0ZXAnLCBzdGVwLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZS52YWx1ZTtcbiAgfVxuXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5ub2RlLnZhbHVlID0gdmFsdWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuL2Jhc2UuY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIExpc3RDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoeyB0YWdOYW1lLCBjbGFzc05hbWUsIGl0ZW1zIH0pIHtcbiAgICBzdXBlcih7IHRhZ05hbWUsIGNsYXNzTmFtZSB9KTtcblxuICAgIGlmICghaXRlbXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaXRlbXMgaGF2ZSBub3QgYmVlbiBhZGRlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQmFzZUNvbXBvbmVudCkge1xuICAgICAgICAgIGNvbnN0IGxpc3RJdGVtQ29tcG9uZW50ID0gbmV3IEJhc2VDb21wb25lbnQoeyB0YWdOYW1lOiAnbGknIH0pO1xuICAgICAgICAgIGxpc3RJdGVtQ29tcG9uZW50LmFwcGVuZChpdGVtKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZChsaXN0SXRlbUNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVtIGlzIG5vdCBhIGNvbXBvbmVudCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJy4vbWluZXN3ZWVwZXIuY29tcG9uZW50LnNjc3MnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UuY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIE1pbmVzd2VlcGVyQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHsgY2xhc3NOYW1lOiBbJ21pbmVzd2VlcGVyJ10gfSk7XG4gIH1cbn1cbiIsImltcG9ydCAnLi9tb2RhbC5jb21wb25lbnQuc2Nzcyc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vYnV0dG9uL2J1dHRvbi5jb21wb25lbnQnO1xuXG5leHBvcnQgY2xhc3MgRW5kR2FtZU1vZGFsQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgY2xhc3NOYW1lID0gW10sIHRleHRDb250ZW50IH0pIHtcbiAgICBzdXBlcih7IGNsYXNzTmFtZTogW2NsYXNzTmFtZSwgJ21vZGFsJ10gfSk7XG5cbiAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX19iYWNrZ3JvdW5kJyB9KTtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX19jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRleHQgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX190ZXh0JywgdGV4dENvbnRlbnQgfSk7XG4gICAgdGhpcy5zdWJtaXRCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHsgY2xhc3NOYW1lOiAnbW9kYWxfX2J1dHRvbicsIHRleHRDb250ZW50OiAnT0snIH0pO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZCh0ZXh0LCB0aGlzLnN1Ym1pdEJ1dHRvbik7XG4gICAgdGhpcy5iYWNrZ3JvdW5kLmFwcGVuZChjb250YWluZXIpO1xuICAgIHRoaXMuYXBwZW5kKHRoaXMuYmFja2dyb3VuZCk7XG4gIH1cblxuICBzZXRTdWJtaXRDbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuc3VibWl0QnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vbW9kYWwuY29tcG9uZW50LnNjc3MnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RDb21wb25lbnQgfSBmcm9tICcuLi9saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi9idXR0b24vYnV0dG9uLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBTY29yZVRhYmxlTW9kYWxDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoeyBjbGFzc05hbWUgPSBbXSwgaXRlbXMgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBjbGFzc05hbWU6IFtjbGFzc05hbWUsICdtb2RhbCddLCB0YWdOYW1lOiAnYXJ0aWNsZScgfSk7XG4gICAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICAgIGlmIChpdGVtcykge1xuICAgICAgY29udGVudCA9IG5ldyBMaXN0Q29tcG9uZW50KHsgdGFnTmFtZTogJ3VsJywgY2xhc3NOYW1lOiAnbW9kYWxfX2xpc3QnLCBpdGVtczogaXRlbXMgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnQgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX190ZXh0JywgdGV4dENvbnRlbnQ6ICdObyByZWNvcmRzJyB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX19iYWNrZ3JvdW5kJyB9KTtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21vZGFsX19jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRpdGxlID0gbmV3IEJhc2VDb21wb25lbnQoeyB0YWdOYW1lOiAnaDEnLCBjbGFzc05hbWU6ICdtb2RhbF9fdGl0bGUnLCB0ZXh0Q29udGVudDogJ3Njb3JlIHRhYmxlJyB9KTtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoeyBjbGFzc05hbWU6ICdtb2RhbF9fYnV0dG9uJywgdGV4dENvbnRlbnQ6ICdPSycgfSk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kKHRpdGxlLCBjb250ZW50LCB0aGlzLnN1Ym1pdEJ1dHRvbik7XG4gICAgdGhpcy5iYWNrZ3JvdW5kLmFwcGVuZChjb250YWluZXIpO1xuICAgIHRoaXMuYXBwZW5kKHRoaXMuYmFja2dyb3VuZCk7XG4gIH1cblxuICBzZXRTdWJtaXRDbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuc3VibWl0QnV0dG9uLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vcGxheWdyb3VuZC5jb21wb25lbnQuc2Nzcyc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGltZXJDb21wb25lbnQgfSBmcm9tICcuLi90aW1lci90aW1lci5jb21wb25lbnQnO1xuaW1wb3J0IHsgSW5mb0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vaW5mby1maWVsZC9pbmZvLWZpZWxkLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5Z3JvdW5kQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGluZm9CYXIgPSBudWxsO1xuICBib2FyZCA9IG51bGw7XG4gIHRpbWVyID0gbnVsbDtcbiAgc3RlcHMgPSBudWxsO1xuICBjb25zdHJ1Y3Rvcih7IGNsYXNzTmFtZSB9KSB7XG4gICAgc3VwZXIoeyBjbGFzc05hbWU6IFtjbGFzc05hbWUsICdwbGF5Z3JvdW5kJ10gfSk7XG5cbiAgICB0aGlzLnN0ZXBzID0gbmV3IEluZm9GaWVsZENvbXBvbmVudCh7IGxhYmVsVGV4dDogJ3N0ZXBzJyB9KTtcbiAgICB0aGlzLnRpbWVyID0gbmV3IFRpbWVyQ29tcG9uZW50KHsgY2xhc3NOYW1lOiAnbWluZXN3ZWVwZXJfX3RpbWVyJyB9KTtcbiAgICB0aGlzLmluZm9CYXIgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ21pbmVzd2VlcGVyX19pbmZvLWJhcicgfSk7XG4gICAgdGhpcy5pbmZvQmFyLmFwcGVuZCh0aGlzLnRpbWVyLCB0aGlzLnN0ZXBzKTtcblxuICAgIHRoaXMuYm9hcmQgPSBuZXcgQmFzZUNvbXBvbmVudCh7XG4gICAgICBjbGFzc05hbWU6IFsnbWluZXN3ZWVwZXJfX2JvYXJkJywgJ2JvYXJkJ10sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFwcGVuZCh0aGlzLmluZm9CYXIsIHRoaXMuYm9hcmQpO1xuICB9XG5cbiAgc2V0U3RlcHNDb21wb25lbnRWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIHRoaXMuc3RlcHMuc2V0VmFsdWUoZm9ybWF0dGVkVmFsdWUpO1xuICB9XG5cbiAgc2V0VGltZXJWYWx1ZShzZWNvbmRzKSB7XG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IHtcbiAgICAgIG1pbnV0ZXM6IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKVxuICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgIHNlY29uZHM6IChzZWNvbmRzICUgNjApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICB9O1xuICAgIHRoaXMudGltZXIuc2V0VGltZShmb3JtYXR0ZWRUaW1lKTtcbiAgfVxuXG4gIHNldENvbnRleHRIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBoYW5kbGVyKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4vYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudEZyb21UZW1wbGF0ZSB9IGZyb20gJy4uL3V0aWxzL2NyZWF0ZS1lbGVtZW50LWZyb20tdGVtcGxhdGUnO1xuXG5leHBvcnQgY2xhc3MgU1ZHQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgY2xhc3NOYW1lID0gJ3N2Zy1pY29uJywgdGVtcGxhdGUgfSkge1xuICAgIHN1cGVyKHt9KTtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVFbGVtZW50RnJvbVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICB0aGlzLm5vZGUuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vdGlsZS5jb21wb25lbnQuc2Nzcyc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU1ZHQ29tcG9uZW50IH0gZnJvbSAnLi4vc3ZnLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTdmdJY29ucyB9IGZyb20gJy4uLy4uL2VudW1zL3N2Zy1pY29ucyc7XG5cbmNvbnN0IE1JTkVfQ0hBUiA9ICcqJztcbmNvbnN0IENPTE9SX1ZBUklBTlRfQ0xBU1NFUyA9IFtcbiAgJ3RpbGVfX2NvbnRlbnQtLWNvbG9yLXZhcmlhbnQtMXN0JyxcbiAgJ3RpbGVfX2NvbnRlbnQtLWNvbG9yLXZhcmlhbnQtMm5kJyxcbiAgJ3RpbGVfX2NvbnRlbnQtLWNvbG9yLXZhcmlhbnQtM3JkJyxcbl07XG5cbmV4cG9ydCBjbGFzcyBUaWxlQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgY2VsbERhdGEsIGNsYXNzTmFtZSA9IFtdIH0pIHtcbiAgICBzdXBlcih7IGNsYXNzTmFtZTogW2NsYXNzTmFtZSwgJ3RpbGUnXSB9KTtcblxuICAgIGNvbnN0IHsgaWQsIGlzTWFya2VkLCBpc0NvdmVyZWQsIHZhbHVlIH0gPSBjZWxsRGF0YTtcbiAgICB0aGlzLmlzTWFya2VkID0gaXNNYXJrZWQ7XG4gICAgdGhpcy5pc0NvdmVyZWQgPSBpc0NvdmVyZWQ7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuaWQgPSBpZDtcblxuICAgIGlmICh0aGlzLnZhbHVlID09PSBNSU5FX0NIQVIpIHtcbiAgICAgIHRoaXMuY29udGVudCA9IG5ldyBCYXNlQ29tcG9uZW50KHtcbiAgICAgICAgdGFnTmFtZTogJ3NwYW4nLFxuICAgICAgICBjbGFzc05hbWU6ICd0aWxlX19jb250ZW50JyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb250ZW50LmFwcGVuZChuZXcgU1ZHQ29tcG9uZW50KHsgdGVtcGxhdGU6IFN2Z0ljb25zLk1JTkUgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY29sb3JWYXJpYW50Q2xhc3M7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gTUlORV9DSEFSKSB7XG4gICAgICAgIGNvbG9yVmFyaWFudENsYXNzID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjeWNsZSA9IENPTE9SX1ZBUklBTlRfQ0xBU1NFUy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy52YWx1ZSAlIGN5Y2xlO1xuICAgICAgICBjb2xvclZhcmlhbnRDbGFzcyA9IENPTE9SX1ZBUklBTlRfQ0xBU1NFU1tpbmRleF07XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRlbnQgPSBuZXcgQmFzZUNvbXBvbmVudCh7XG4gICAgICAgIHRhZ05hbWU6ICdzcGFuJyxcbiAgICAgICAgY2xhc3NOYW1lOiBbY29sb3JWYXJpYW50Q2xhc3MsICd0aWxlX19jb250ZW50J10sXG4gICAgICAgIHRleHRDb250ZW50OiB0aGlzLnZhbHVlID09PSAwID8gJycgOiB0aGlzLnZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuYXBwZW5kKHRoaXMuY29udGVudCk7XG4gICAgaWYgKGlzQ292ZXJlZCkge1xuICAgICAgdGhpcy5jb3ZlciA9IG5ldyBCYXNlQ29tcG9uZW50KHsgY2xhc3NOYW1lOiAndGlsZV9fY292ZXInIH0pO1xuICAgICAgaWYgKHRoaXMuaXNNYXJrZWQpIHtcbiAgICAgICAgdGhpcy5jb3Zlci5hcHBlbmQobmV3IFNWR0NvbXBvbmVudCh7IHRlbXBsYXRlOiBTdmdJY29ucy5NQVJLIH0pKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYXBwZW5kKHRoaXMuY292ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHNldExlZnRDbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMubGVmdENsaWNrSGFuZGxlciA9IGhhbmRsZXI7XG4gICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5sZWZ0Q2xpY2tIYW5kbGVyKTtcbiAgfVxuXG4gIHNldFJpZ2h0Q2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLnJpZ3RoQ2xpY2tIYW5kbGVyID0gaGFuZGxlcjtcbiAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLnJpZ3RoQ2xpY2tIYW5kbGVyKTtcbiAgfVxuXG4gIHJlbW92ZUhhbmRsZXJzKCkge1xuICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubGVmdENsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5yaWd0aENsaWNrSGFuZGxlcik7XG4gIH1cbn1cbiIsImltcG9ydCAnLi90aW1lci5jb21wb25lbnQuc2Nzcyc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgSW5mb0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vaW5mby1maWVsZC9pbmZvLWZpZWxkLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjbGFzcyBUaW1lckNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcih7IGNsYXNzTmFtZSB9KSB7XG4gICAgc3VwZXIoeyBjbGFzc05hbWU6IFtjbGFzc05hbWUsICd0aW1lciddIH0pO1xuICAgIHRoaXMubWludXRlc0NvbXBvbmVudCA9IG5ldyBJbmZvRmllbGRDb21wb25lbnQoe1xuICAgICAgbGFiZWxUZXh0OiAnbWludXRlcycsXG4gICAgICBjbGFzc05hbWU6ICd0aW1lcl9fbWludXRlcycsXG4gICAgfSk7XG4gICAgdGhpcy5zZWNvbmRzQ29tcG9uZW50ID0gbmV3IEluZm9GaWVsZENvbXBvbmVudCh7XG4gICAgICBsYWJlbFRleHQ6ICdzZWNvbmRzJyxcbiAgICAgIGNsYXNzTmFtZTogJ3RpbWVyX19zZWNvbmRzJyxcbiAgICB9KTtcbiAgICB0aGlzLmFwcGVuZCh0aGlzLm1pbnV0ZXNDb21wb25lbnQsIHRoaXMuc2Vjb25kc0NvbXBvbmVudCk7XG4gICAgdGhpcy5hcHBlbmQoXG4gICAgICBuZXcgQmFzZUNvbXBvbmVudCh7XG4gICAgICAgIHRhZ05hbWU6ICdwJyxcbiAgICAgICAgY2xhc3NOYW1lOiAndGltZXJfX2RpdmlkZXInLFxuICAgICAgICB0ZXh0Q29udGVudDogJzonLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgc2V0VGltZSh7IG1pbnV0ZXMsIHNlY29uZHMgfSkge1xuICAgIHRoaXMubWludXRlc0NvbXBvbmVudC5zZXRWYWx1ZShtaW51dGVzKTtcbiAgICB0aGlzLnNlY29uZHNDb21wb25lbnQuc2V0VmFsdWUoc2Vjb25kcyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnRyb2xQYW5lbENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29udHJvbC1wYW5lbC9jb250cm9sLXBhbmVsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTVkdDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL3N2Zy5jb21wb25lbnQnO1xuaW1wb3J0IHsgU3ZnSWNvbnMgfSBmcm9tICcuLi9lbnVtcy9zdmctaWNvbnMnO1xuaW1wb3J0IHsgVGhlbWVWYWx1ZXMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgU0laRV9WQVJJQU5UUyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XG5cbmNvbnN0IFRJTEVfU0xJREVSX1BPU0lUSU9OX1NUT1JBR0VfS0VZID0gJ3RpbGVTbGlkZXJQb3NpdGlvbic7XG5jb25zdCBNSU5FX1NMSURFUl9QT1NJVElPTl9TVE9SQUdFX0tFWSA9ICdtaW5lU2xpZGVyUG9zaXRpb24nO1xuXG5leHBvcnQgY2xhc3MgQ29udHJvbFBhbmVsQ29udHJvbGxlciB7XG4gIGNvbnRyb2xQYW5lbENvbXBvbmVudCA9IG5ldyBDb250cm9sUGFuZWxDb21wb25lbnQoeyBjbGFzc05hbWU6ICdtaW5lc3dlZXBlcl9fY29udHJvbC1wYW5lbCcgfSk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc2V0dGluZ3MsXG4gICAgY29udGFpbmVyLFxuICAgIG9uU3RhcnRHYW1lQnV0dG9uQ2xpY2tIYW5kbGVyLFxuICAgIG9uVGhlbWVDaGFuZ2VIYW5kbGVyLFxuICAgIG9uU291bmRDaGFuZ2VIYW5kbGVyLFxuICAgIG9uU2NvcmVUYWJsZUJ1dHRvbkNsaWNrSGFuZGxlclxuICApIHtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5vblN0YXJ0R2FtZUJ1dHRvbkNsaWNrSGFuZGxlciA9IG9uU3RhcnRHYW1lQnV0dG9uQ2xpY2tIYW5kbGVyO1xuICAgIHRoaXMub25UaGVtZUNoYW5nZUhhbmRsZXIgPSBvblRoZW1lQ2hhbmdlSGFuZGxlcjtcbiAgICB0aGlzLm9uU291bmRDaGFuZ2VIYW5kbGVyID0gb25Tb3VuZENoYW5nZUhhbmRsZXI7XG4gICAgdGhpcy5vblNjb3JlVGFibGVCdXR0b25DbGlja0hhbmRsZXIgPSBvblNjb3JlVGFibGVCdXR0b25DbGlja0hhbmRsZXI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5zZXRIYW5kbGVycygpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudCk7XG5cbiAgICB0aGlzLnN3aXRjaFNvdW5kQnV0dG9uSWNvbigpO1xuICAgIHRoaXMuc3dpdGNoVGhlbWVCdXR0b25JY29uKCk7XG5cbiAgICBjb25zdCB0aWxlU2xpZGVyVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUSUxFX1NMSURFUl9QT1NJVElPTl9TVE9SQUdFX0tFWSkgfHwgMDtcbiAgICB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC50aWxlU2V0dGluZ0J1dHRvbi5zZXRTbGlkZXJWYWx1ZSh0aWxlU2xpZGVyVmFsdWUpO1xuICAgIHRoaXMuY29udHJvbFBhbmVsQ29tcG9uZW50LnRpbGVTZXR0aW5nQnV0dG9uLnNldE91dHB1dFZhbHVlKFNJWkVfVkFSSUFOVFNbdGlsZVNsaWRlclZhbHVlXSk7XG4gICAgY29uc3QgbWluZVNsaWRlclZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTUlORV9TTElERVJfUE9TSVRJT05fU1RPUkFHRV9LRVkpIHx8IDEwO1xuICAgIHRoaXMuY29udHJvbFBhbmVsQ29tcG9uZW50Lm1pbmVTZXR0aW5nQnV0dG9uLnNldFNsaWRlclZhbHVlKG1pbmVTbGlkZXJWYWx1ZSk7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQubWluZVNldHRpbmdCdXR0b24uc2V0T3V0cHV0VmFsdWUobWluZVNsaWRlclZhbHVlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoKSA9PiB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSUxFX1NMSURFUl9QT1NJVElPTl9TVE9SQUdFX0tFWSwgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuZ2V0VGlsZVNldHRpbmdTbGlkZXJWYWx1ZSgpKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKE1JTkVfU0xJREVSX1BPU0lUSU9OX1NUT1JBR0VfS0VZLCB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5nZXRNaW5lU2V0dGluZ1NsaWRlclZhbHVlKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0SGFuZGxlcnMoKSB7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuc2V0TmV3R2FtZUJ1dHRvbkNsaWNrSGFuZGxlcigoKSA9PiB7XG4gICAgICB0aGlzLm9uU3RhcnRHYW1lQnV0dG9uQ2xpY2tIYW5kbGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuc2V0VGlsZVNldHRpbmdzQnV0dG9uQ2xpY2tIYW5kbGVyKCgpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuZ2V0VGlsZVNldHRpbmdTbGlkZXJWYWx1ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVElMRV9TTElERVJfUE9TSVRJT05fU1RPUkFHRV9LRVksIHZhbHVlKTtcbiAgICAgIHRoaXMuY29udHJvbFBhbmVsQ29tcG9uZW50LnRpbGVTZXR0aW5nQnV0dG9uLnNldE91dHB1dFZhbHVlKFNJWkVfVkFSSUFOVFNbdmFsdWVdKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5zZXRNaW5lU2V0dGluZ3NCdXR0b25DbGlja0hhbmRsZXIoKCkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5nZXRNaW5lU2V0dGluZ1NsaWRlclZhbHVlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShNSU5FX1NMSURFUl9QT1NJVElPTl9TVE9SQUdFX0tFWSwgdmFsdWUpO1xuICAgICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQubWluZVNldHRpbmdCdXR0b24uc2V0T3V0cHV0VmFsdWUodmFsdWUpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udHJvbFBhbmVsQ29tcG9uZW50LnNldFNjb3JlQnV0dG9uQ2xpY2tIYW5kbGVyKCgpID0+IHtcbiAgICAgIHRoaXMub25TY29yZVRhYmxlQnV0dG9uQ2xpY2tIYW5kbGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuc2V0VGhlbWVCdXR0b25DbGlja0hhbmRsZXIoKCkgPT4ge1xuICAgICAgdGhpcy5vblRoZW1lQ2hhbmdlSGFuZGxlcigpO1xuICAgICAgdGhpcy5zd2l0Y2hUaGVtZUJ1dHRvbkljb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5zZXRTb3VuZEJ1dHRvbkNsaWNrSGFuZGxlcigoKSA9PiB7XG4gICAgICB0aGlzLm9uU291bmRDaGFuZ2VIYW5kbGVyKCk7XG4gICAgICB0aGlzLnN3aXRjaFNvdW5kQnV0dG9uSWNvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgc3dpdGNoU291bmRCdXR0b25JY29uKCkge1xuICAgIGNvbnN0IHNvdW5kQnV0dG9uSWNvbiA9IG5ldyBTVkdDb21wb25lbnQoe1xuICAgICAgdGVtcGxhdGU6IHRoaXMuc2V0dGluZ3MubXV0ZSA9PT0gZmFsc2UgPyBTdmdJY29ucy5NVVRFIDogU3ZnSWNvbnMuVU5NVVRFLFxuICAgIH0pO1xuICAgIHRoaXMuY29udHJvbFBhbmVsQ29tcG9uZW50LnNldFNvdW5kQnV0dG9uSWNvbihzb3VuZEJ1dHRvbkljb24pO1xuICB9XG5cbiAgc3dpdGNoVGhlbWVCdXR0b25JY29uKCkge1xuICAgIGNvbnN0IHRoZW1lQnV0dG9uSWNvbiA9IG5ldyBTVkdDb21wb25lbnQoe1xuICAgICAgdGVtcGxhdGU6IHRoaXMuc2V0dGluZ3MudGhlbWUgPT09IFRoZW1lVmFsdWVzLkxJR0hUID8gU3ZnSWNvbnMuTklHSFQgOiBTdmdJY29ucy5EQVksXG4gICAgfSk7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDb21wb25lbnQuc2V0VGhlbWVCdXR0b25JY29uKHRoZW1lQnV0dG9uSWNvbik7XG4gIH1cblxuICBnZXRUaWxlU2V0dGluZ1NsaWRlclZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5nZXRUaWxlU2V0dGluZ1NsaWRlclZhbHVlKCk7XG4gIH1cblxuICBnZXRNaW5lU2V0dGluZ1NsaWRlclZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xQYW5lbENvbXBvbmVudC5nZXRNaW5lU2V0dGluZ1NsaWRlclZhbHVlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1pbmVzd2VlcGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9taW5lc3dlZXBlci9taW5lc3dlZXBlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udHJvbFBhbmVsQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbC1wYW5lbC5jb250cm9sbGVyJztcbmltcG9ydCB7IFBsYXlncm91bmRDb250cm9sbGVyIH0gZnJvbSAnLi9wbGF5Z3JvdW5kLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRW5kR2FtZU1vZGFsQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9tb2RhbC9lbmQtZ2FtZS1tb2RhbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGhlbWVWYWx1ZXMsIFdJTl9TSUdOLCBXSU5fVEVYVCwgTE9TRV9URVhULCBMT1NFX1NJR04gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgU0laRV9WQVJJQU5UUyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTY29yZVRhYmxlTW9kYWxDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsL3Njb3JlLXRhYmxlLW1vZGFsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9iYXNlLmNvbXBvbmVudCc7XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1MgPSB7XG4gIGJvYXJkU2l6ZTogMTAsXG4gIGJvYXJkTWluZUNvdW50OiAxMCxcbiAgdGhlbWU6IFRoZW1lVmFsdWVzLkxJR0hULFxuICBtdXRlOiBmYWxzZSxcbn07XG5cbmNvbnN0IFNDT1JFX1RBQkxFX1NUT1JBR0VfS0VZID0gJ3Njb3JlVGFibGUnO1xuY29uc3QgU0VUVElOR1NfU1RPUkFHRV9LRVkgPSAnc2V0dGluZ3MnO1xuXG5leHBvcnQgY2xhc3MgTWluZXN3ZWVwZXJDb250cm9sbGVyIHtcbiAgc2F2ZWRTZXR0aW5ncyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oU0VUVElOR1NfU1RPUkFHRV9LRVkpKTtcbiAgc2V0dGluZ3MgPSB0aGlzLnNhdmVkU2V0dGluZ3MgfHwgREVGQVVMVF9TRVRUSU5HUztcbiAgbWluZXN3ZWVwZXJDb21wb25lbnQgPSBuZXcgTWluZXN3ZWVwZXJDb21wb25lbnQoKTtcbiAgY29udHJvbFBhbmVsQ29udHJvbGxlciA9IG5ldyBDb250cm9sUGFuZWxDb250cm9sbGVyKFxuICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgdGhpcy5taW5lc3dlZXBlckNvbXBvbmVudCxcbiAgICB0aGlzLm9uU3RhcnRHYW1lQnV0dG9uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgdGhpcy5vblRoZW1lQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgIHRoaXMub25Tb3VuZENoYW5nZUhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICB0aGlzLm9uU2NvcmVUYWJsZUJ1dHRvbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpXG4gICk7XG4gIHBsYXlncm91bmRDb250cm9sbGVyID0gbmV3IFBsYXlncm91bmRDb250cm9sbGVyKFxuICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgdGhpcy5taW5lc3dlZXBlckNvbXBvbmVudCxcbiAgICB0aGlzLm9uR2FtZUVuZEhhbmRsZXIuYmluZCh0aGlzKVxuICApO1xuICB0aW1lciA9IG51bGw7XG4gIGludGVydmFsSWQgPSBudWxsO1xuICBzY29yZVRhYmxlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTQ09SRV9UQUJMRV9TVE9SQUdFX0tFWSkpIHx8IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLm1pbmVzd2VlcGVyQ29tcG9uZW50KTtcbiAgICB0aGlzLmNvbnRyb2xQYW5lbENvbnRyb2xsZXIucmVuZGVyKCk7XG4gICAgdGhpcy5wbGF5Z3JvdW5kQ29udHJvbGxlci5yZW5kZXIoKTtcbiAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MudGhlbWUpIHtcbiAgICAgIGNhc2UgJ2xpZ2h0JzpcbiAgICAgICAgdGhpcy5taW5lc3dlZXBlckNvbXBvbmVudC5hZGRDbGFzcyhgdGhlbWUtJHtUaGVtZVZhbHVlcy5MSUdIVH1gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkYXJrJzpcbiAgICAgICAgdGhpcy5taW5lc3dlZXBlckNvbXBvbmVudC5hZGRDbGFzcyhgdGhlbWUtJHtUaGVtZVZhbHVlcy5EQVJLfWApO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU0VUVElOR1NfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHRoaXMuc2V0dGluZ3MpKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uVGhlbWVDaGFuZ2VIYW5kbGVyKCkge1xuICAgIGNvbnN0IHByZXZUaGVtZUNsYXNzTmFtZSA9IGB0aGVtZS0ke3RoaXMuc2V0dGluZ3MudGhlbWV9YDtcbiAgICB0aGlzLm1pbmVzd2VlcGVyQ29tcG9uZW50LnRvZ2dsZUNsYXNzKHByZXZUaGVtZUNsYXNzTmFtZSk7XG5cbiAgICB0aGlzLnNldHRpbmdzLnRoZW1lID0gdGhpcy5zZXR0aW5ncy50aGVtZSA9PT0gVGhlbWVWYWx1ZXMuTElHSFQgPyBUaGVtZVZhbHVlcy5EQVJLIDogVGhlbWVWYWx1ZXMuTElHSFQ7XG5cbiAgICBjb25zdCBuZXdUaGVtZUNsYXNzTmFtZSA9IGB0aGVtZS0ke3RoaXMuc2V0dGluZ3MudGhlbWV9YDtcbiAgICB0aGlzLm1pbmVzd2VlcGVyQ29tcG9uZW50LnRvZ2dsZUNsYXNzKG5ld1RoZW1lQ2xhc3NOYW1lKTtcbiAgfVxuXG4gIG9uU291bmRDaGFuZ2VIYW5kbGVyKCkge1xuICAgIHRoaXMuc2V0dGluZ3MubXV0ZSA9ICF0aGlzLnNldHRpbmdzLm11dGU7XG4gICAgdGhpcy5wbGF5Z3JvdW5kQ29udHJvbGxlci5hcHBseVNvdW5kU2V0dGluZ3MoKTtcbiAgfVxuXG4gIG9uU2NvcmVUYWJsZUJ1dHRvbkNsaWNrSGFuZGxlcigpIHtcbiAgICBpZiAodGhpcy5zY29yZVRhYmxlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLnNjb3JlVGFibGUubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgdGltZSwgc3RlcHMgfSA9IGl0ZW07XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgJHtuYW1lfSB8ICR7dGltZX0gfCAke3N0ZXBzfSBtb3Zlc2A7XG4gICAgICAgIGNvbnN0IG5vdGUgPSBuZXcgQmFzZUNvbXBvbmVudCh7IHRleHRDb250ZW50OiBjb250ZW50IH0pO1xuICAgICAgICByZXR1cm4gbm90ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zY29yZU1vZGFsID0gbmV3IFNjb3JlVGFibGVNb2RhbENvbXBvbmVudCh7IGl0ZW1zOiBsaXN0IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjb3JlTW9kYWwgPSBuZXcgU2NvcmVUYWJsZU1vZGFsQ29tcG9uZW50KCk7XG4gICAgfVxuICAgIHRoaXMuc2NvcmVNb2RhbC5zZXRTdWJtaXRDbGlja0hhbmRsZXIodGhpcy5vblNjb3JlVGFibGVTdWJtaXRDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5taW5lc3dlZXBlckNvbXBvbmVudC5hcHBlbmQodGhpcy5zY29yZU1vZGFsKTtcbiAgfVxuXG4gIG9uU3RhcnRHYW1lQnV0dG9uQ2xpY2tIYW5kbGVyKCkge1xuICAgIGNvbnN0IHRpbGVTbGlkZXJWYWx1ZSA9IHRoaXMuY29udHJvbFBhbmVsQ29udHJvbGxlci5nZXRUaWxlU2V0dGluZ1NsaWRlclZhbHVlKCk7XG4gICAgY29uc3QgbWluZVNsaWRlclZhbHVlID0gdGhpcy5jb250cm9sUGFuZWxDb250cm9sbGVyLmdldE1pbmVTZXR0aW5nU2xpZGVyVmFsdWUoKTtcblxuICAgIHRoaXMuc2V0dGluZ3MuYm9hcmRTaXplID0gU0laRV9WQVJJQU5UU1t0aWxlU2xpZGVyVmFsdWVdO1xuICAgIHRoaXMuc2V0dGluZ3MuYm9hcmRNaW5lQ291bnQgPSBtaW5lU2xpZGVyVmFsdWU7XG4gICAgdGhpcy5wbGF5Z3JvdW5kQ29udHJvbGxlci5yZXN0YXJ0R2FtZSgpO1xuICB9XG5cbiAgb25FbmRHYW1lU3VibWl0Q2xpY2tIYW5kbGVyKCkge1xuICAgIHRoaXMuZW5kR2FtZU1vZGFsLmRlc3Ryb3koKTtcbiAgICB0aGlzLmVuZEdhbWVNb2RhbCA9IG51bGw7XG4gIH1cblxuICBvblNjb3JlVGFibGVTdWJtaXRDbGlja0hhbmRsZXIoKSB7XG4gICAgdGhpcy5zY29yZU1vZGFsLmRlc3Ryb3koKTtcbiAgICB0aGlzLnNjb3JlTW9kYWwgPSBudWxsO1xuICB9XG5cbiAgb25HYW1lRW5kSGFuZGxlcihzaWduLCBzdGVwcywgdGltZXIpIHtcbiAgICB0aGlzLnBsYXlncm91bmRDb250cm9sbGVyLnN0b3BUaW1lcigpO1xuICAgIHN3aXRjaCAoc2lnbikge1xuICAgICAgY2FzZSBXSU5fU0lHTjoge1xuICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcih0aW1lciAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IHRpbWVyICUgNjA7XG4gICAgICAgIGNvbnN0IG1pbnV0ZVN1YnN0ciA9IGAke21pbnV0ZXMgPT09IDAgPyAnJyA6IGAke21pbnV0ZXN9ICAke21pbnV0ZXMgPiAxID8gJ21pbnV0ZXMnIDogJ21pbnV0ZSd9YH1gO1xuICAgICAgICBjb25zdCBzZWNvbmRTdWJzdHIgPSBgJHtzZWNvbmRzID09PSAwID8gJycgOiBgJHtzZWNvbmRzfSAgJHtzZWNvbmRzID4gMSA/ICdzZWNvbmRzJyA6ICdzZWNvbmQnfWB9YDtcbiAgICAgICAgY29uc3QgdGltZVN1YnRyaW5nID0gYCR7bWludXRlU3Vic3RyfSAke3NlY29uZFN1YnN0cn1gO1xuICAgICAgICBjb25zdCB3aW5UZXh0ID0gV0lOX1RFWFQucmVwbGFjZSgnIyMgc2Vjb25kcycsIHRpbWVTdWJ0cmluZykucmVwbGFjZSgnI04nLCBzdGVwcyk7XG4gICAgICAgIHRoaXMuZW5kR2FtZU1vZGFsID0gbmV3IEVuZEdhbWVNb2RhbENvbXBvbmVudCh7IHRleHRDb250ZW50OiB3aW5UZXh0IH0pO1xuICAgICAgICBjb25zdCBzY29yZVJlY29yZCA9IHtcbiAgICAgICAgICBuYW1lOiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IGhvdXIxMjogZmFsc2UgfSksXG4gICAgICAgICAgdGltZTogYCR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YCxcbiAgICAgICAgICBzdGVwczogc3RlcHMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NvcmVUYWJsZS51bnNoaWZ0KHNjb3JlUmVjb3JkKTtcbiAgICAgICAgdGhpcy5zY29yZVRhYmxlLmxlbmd0aCA9IDEwO1xuICAgICAgICB0aGlzLnNjb3JlVGFibGUgPSB0aGlzLnNjb3JlVGFibGUuZmlsdGVyKChzY29yZSkgPT4gc2NvcmUgIT09IG51bGwpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTQ09SRV9UQUJMRV9TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkodGhpcy5zY29yZVRhYmxlKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBMT1NFX1NJR046XG4gICAgICAgIHRoaXMuZW5kR2FtZU1vZGFsID0gbmV3IEVuZEdhbWVNb2RhbENvbXBvbmVudCh7IHRleHRDb250ZW50OiBMT1NFX1RFWFQgfSk7XG4gICAgfVxuICAgIHRoaXMuZW5kR2FtZU1vZGFsLnNldFN1Ym1pdENsaWNrSGFuZGxlcih0aGlzLm9uRW5kR2FtZVN1Ym1pdENsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLm1pbmVzd2VlcGVyQ29tcG9uZW50LmFwcGVuZCh0aGlzLmVuZEdhbWVNb2RhbCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFBsYXlncm91bmRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL3BsYXlncm91bmQvcGxheWdyb3VuZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGlsZUNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdGlsZS90aWxlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNaW5lc3dlZXBlck1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL21pbmVzd2VlcGVyLm1vZGVsJztcbmltcG9ydCB7IG5laWdoYm91ckxvY2F0aW9uTWFwLCBMT1NFX1NJR04sIFdJTl9TSUdOIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldE1hdHJpeENvbXBvbmVudFBvc2lpdG9uIH0gZnJvbSAnLi4vdXRpbHMvZ2V0LW1hdHJpeC1wb3NpdGlvbic7XG5pbXBvcnQgeyBBdWRpb0NvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvYXVkaW8uY29tcG9uZW50JztcblxuY29uc3QgVElNRVJfU1RPUkFHRV9LRVkgPSAndGltZXInO1xuY29uc3QgU1RFUFNfU1RPUkFHRV9LRVkgPSAnc3RlcHMnO1xuXG5leHBvcnQgY2xhc3MgUGxheWdyb3VuZENvbnRyb2xsZXIge1xuICBwbGF5Z3JvdW5kID0gbnVsbDtcbiAgdGlsZUNvbXBvbmVudHMgPSBbXTtcbiAgc3RlcHMgPSAwO1xuICB0aW1lciA9IDA7XG4gIGludGVydmFsSWQgPSBudWxsO1xuICBpc0dhbWVTdGFydGVkID0gZmFsc2U7XG4gIHNvdW5kRWZmZWN0c0NvbXBvbmVudCA9IG5ldyBBdWRpb0NvbXBvbmVudCgpO1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBjb250YWluZXIsIG9uRW5kR2FtZUhhbmRsZXIpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5vbkVuZEdhbWVIYW5kbGVyID0gb25FbmRHYW1lSGFuZGxlcjtcbiAgICB0aGlzLmRhdGFDaGFuZ2VIYW5kbGVyID0gdGhpcy5kYXRhQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25TdGFydEdhbWVIYW5kbGVyID0gdGhpcy5vblN0YXJ0R2FtZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1vZGVsID0gbmV3IE1pbmVzd2VlcGVyTW9kZWwoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNHYW1lU3RhcnRlZCkge1xuICAgICAgICB0aGlzLm1vZGVsLnNhdmVJblN0b3JhZ2UoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVElNRVJfU1RPUkFHRV9LRVksIHRoaXMudGltZXIpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVEVQU19TVE9SQUdFX0tFWSwgdGhpcy5zdGVwcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3Qgc2F2ZWRNb2RlbCA9IHRoaXMubW9kZWwubG9hZEZyb21TdG9yYWdlKCk7XG4gICAgaWYgKHNhdmVkTW9kZWwpIHtcbiAgICAgIHRoaXMuc3RhcnRHYW1lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0dhbWVTdGFydGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlbC5zZXRNb2RlbCh0aGlzLnNldHRpbmdzLCB0cnVlKTtcbiAgICB0aGlzLm1vZGVsLnNldE9uRGF0YUNoYW5nZUhhbmRsZXIodGhpcy5vblN0YXJ0R2FtZUhhbmRsZXIpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1vZGVsLmdldERhdGEoKTtcbiAgICB0aGlzLmNyZWF0ZVRpbGVDb21wb25lbnRzKGRhdGEpO1xuICAgIHRoaXMucmVuZGVyUGxheWdyb3VuZCgpO1xuICB9XG5cbiAgY3JlYXRlVGlsZUNvbXBvbmVudHMoZGF0YSkge1xuICAgIHRoaXMudGlsZUNvbXBvbmVudHMgPSBkYXRhLm1hcCgoZGF0YVJvdykgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFSb3cubWFwKChjZWxsRGF0YSkgPT4gdGhpcy5jcmVhdGVUaWxlQ29tcG9uZW50KGNlbGxEYXRhKSk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJQbGF5Z3JvdW5kKCkge1xuICAgIGlmICh0aGlzLnBsYXlncm91bmQpIHtcbiAgICAgIHRoaXMucGxheWdyb3VuZC5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgdGhpcy5wbGF5Z3JvdW5kID0gbmV3IFBsYXlncm91bmRDb21wb25lbnQoeyBjbGFzc05hbWU6ICdtaW5lc3dlZXBlcl9fcGxheWdyb3VuZCcgfSk7XG4gICAgdGhpcy50aWxlQ29tcG9uZW50cy5mb3JFYWNoKChkYXRhUm93KSA9PiB7XG4gICAgICBjb25zdCBsaW5lID0gbmV3IEJhc2VDb21wb25lbnQoeyBjbGFzc05hbWU6ICdtaW5lc3dlZXBlcl9fdGlsZS1yb3cnIH0pO1xuICAgICAgZm9yIChsZXQgdGlsZUNvbXBvbmVudCBvZiBkYXRhUm93KSB7XG4gICAgICAgIGxpbmUuYXBwZW5kKHRpbGVDb21wb25lbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5wbGF5Z3JvdW5kLmJvYXJkLmFwcGVuZChsaW5lKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLnBsYXlncm91bmQpO1xuICAgIHRoaXMucGxheWdyb3VuZC5zZXRDb250ZXh0SGFuZGxlcigoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XG4gIH1cblxuICBzdGFydEdhbWUoY29tcG9uZW50VG9JZ25vcmUpIHtcbiAgICB0aGlzLmlzR2FtZVN0YXJ0ZWQgPSB0cnVlO1xuICAgIGNvbnN0IGlnbm9yZUNlbGxDb29yZGl0YW5lcyA9IGdldE1hdHJpeENvbXBvbmVudFBvc2lpdG9uKHRoaXMudGlsZUNvbXBvbmVudHMsIGNvbXBvbmVudFRvSWdub3JlKTtcbiAgICB0aGlzLm1vZGVsLnNldE1vZGVsKHRoaXMuc2V0dGluZ3MsIGZhbHNlLCBpZ25vcmVDZWxsQ29vcmRpdGFuZXMpO1xuICAgIHRoaXMubW9kZWwuc2V0T25EYXRhQ2hhbmdlSGFuZGxlcih0aGlzLmRhdGFDaGFuZ2VIYW5kbGVyKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5tb2RlbC5nZXREYXRhKCk7XG4gICAgdGhpcy5jcmVhdGVUaWxlQ29tcG9uZW50cyhkYXRhKTtcbiAgICB0aGlzLnJlbmRlclBsYXlncm91bmQoKTtcbiAgICBjb25zdCBzYXZlZFRpbWVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVElNRVJfU1RPUkFHRV9LRVkpO1xuICAgIGNvbnN0IHNhdmVkU3RlcHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVEVQU19TVE9SQUdFX0tFWSk7XG4gICAgdGhpcy50aW1lciA9ICtzYXZlZFRpbWVyIHx8IDA7XG4gICAgdGhpcy5zdGVwcyA9ICtzYXZlZFN0ZXBzIHx8IDA7XG4gICAgdGhpcy5wbGF5Z3JvdW5kLnNldFRpbWVyVmFsdWUodGhpcy50aW1lcik7XG4gICAgdGhpcy5wbGF5Z3JvdW5kLnNldFN0ZXBzQ29tcG9uZW50VmFsdWUodGhpcy5zdGVwcyk7XG4gICAgdGhpcy5hcHBseVNvdW5kU2V0dGluZ3MoKTtcbiAgICB0aGlzLnN0YXJ0VGltZXIoKTtcbiAgICB0aGlzLm1vZGVsLnNhdmVJblN0b3JhZ2UoKTtcbiAgfVxuXG4gIGRhdGFDaGFuZ2VIYW5kbGVyKG5ld0RhdGEpIHtcbiAgICB0aGlzLnJlcmVuZGVyVGlsZShuZXdEYXRhKTtcbiAgfVxuXG4gIG9uU3RhcnRHYW1lSGFuZGxlcihjZWxsVG9JZ25vcmUpIHtcbiAgICB0aGlzLnN0YXJ0R2FtZShjZWxsVG9JZ25vcmUpO1xuICB9XG5cbiAgY3JlYXRlVGlsZUNvbXBvbmVudChjZWxsRGF0YSkge1xuICAgIGxldCB0aWxlQ29tcG9uZW50ID0gbmV3IFRpbGVDb21wb25lbnQoeyBjZWxsRGF0YSB9KTtcbiAgICB0aWxlQ29tcG9uZW50LnNldExlZnRDbGlja0hhbmRsZXIoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmlzR2FtZVN0YXJ0ZWQpIHtcbiAgICAgICAgY29uc3QgdGlsZVBvc2l0aW9uID0gZ2V0TWF0cml4Q29tcG9uZW50UG9zaWl0b24odGhpcy50aWxlQ29tcG9uZW50cywgdGlsZUNvbXBvbmVudCk7XG4gICAgICAgIHRoaXMuc3RhcnRHYW1lKHRpbGVDb21wb25lbnQpO1xuICAgICAgICB0aWxlQ29tcG9uZW50ID0gdGhpcy50aWxlQ29tcG9uZW50c1t0aWxlUG9zaXRpb24ubGluZUluZGV4XVt0aWxlUG9zaXRpb24uY2VsbEluZGV4XTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbGVDb21wb25lbnQuaXNDb3ZlcmVkKSB7XG4gICAgICAgIHRoaXMuc3RlcHMrKztcbiAgICAgICAgdGhpcy5zZXRTdGVwc0ZpZWxkKCk7XG4gICAgICAgIHRoaXMuc291bmRFZmZlY3RzQ29tcG9uZW50LnBsYXlMZWZ0Q2xpY2tTb3VuZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy51bmNvdmVyVGlsZSh0aWxlQ29tcG9uZW50KTtcbiAgICAgIGlmICh0aWxlQ29tcG9uZW50LnZhbHVlID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5zaG93TWluZXMoKTtcbiAgICAgICAgdGhpcy5zdG9wUGxheWdyb3VuZEV2ZW50cygpO1xuICAgICAgICB0aGlzLmlzR2FtZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RFUFNfU1RPUkFHRV9LRVkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUSU1FUl9TVE9SQUdFX0tFWSk7XG4gICAgICAgIHRoaXMubW9kZWwuZXJhc2VGcm9tU3RvcmFnZSgpO1xuICAgICAgICB0aGlzLm9uRW5kR2FtZUhhbmRsZXIoTE9TRV9TSUdOKTtcbiAgICAgICAgdGhpcy5zb3VuZEVmZmVjdHNDb21wb25lbnQucGxheUxvc2VTb3VuZCgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3ZlcmVkVGlsZXNDb3VudCA9IHRoaXMudGlsZUNvbXBvbmVudHMuZmxhdCgxKS5maWx0ZXIoKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LmlzQ292ZXJlZCkubGVuZ3RoO1xuICAgICAgY29uc3QgaXNBbGxUaWxlc1VuY292ZXJlZCA9IGNvdmVyZWRUaWxlc0NvdW50IC0gdGhpcy5zZXR0aW5ncy5ib2FyZE1pbmVDb3VudCA9PT0gMDtcbiAgICAgIGlmIChpc0FsbFRpbGVzVW5jb3ZlcmVkKSB7XG4gICAgICAgIHRoaXMuc3RvcFBsYXlncm91bmRFdmVudHMoKTtcbiAgICAgICAgdGhpcy5pc0dhbWVTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNURVBTX1NUT1JBR0VfS0VZKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oVElNRVJfU1RPUkFHRV9LRVkpO1xuICAgICAgICB0aGlzLm1vZGVsLmVyYXNlRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgdGhpcy5vbkVuZEdhbWVIYW5kbGVyKFdJTl9TSUdOLCB0aGlzLnN0ZXBzLCB0aGlzLnRpbWVyKTtcbiAgICAgICAgdGhpcy5zb3VuZEVmZmVjdHNDb21wb25lbnQucGxheVdpblNvdW5kKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGlsZUNvbXBvbmVudC5zZXRSaWdodENsaWNrSGFuZGxlcigoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICh0aGlzLmlzR2FtZVN0YXJ0ZWQpIHtcbiAgICAgICAgdGhpcy5zb3VuZEVmZmVjdHNDb21wb25lbnQucGxheVJpZ2h0Q2xpY2tTb3VuZCgpO1xuICAgICAgICB0aGlzLm1vZGVsLnVwZGF0ZURhdGEoeyBpZDogdGlsZUNvbXBvbmVudC5pZCwgaXNNYXJrZWQ6ICF0aWxlQ29tcG9uZW50LmlzTWFya2VkIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aWxlQ29tcG9uZW50O1xuICB9XG5cbiAgcmVzdGFydEdhbWUoKSB7XG4gICAgdGhpcy5tb2RlbC5lcmFzZUZyb21TdG9yYWdlKCk7XG4gICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUSU1FUl9TVE9SQUdFX0tFWSk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RFUFNfU1RPUkFHRV9LRVkpO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICByZXJlbmRlclRpbGUobmV3RGF0YSkge1xuICAgIGxldCB0YXJnZXRDb21wb25lbnQ7XG4gICAgZm9yIChsZXQgbGluZSBvZiB0aGlzLnRpbGVDb21wb25lbnRzKSB7XG4gICAgICB0YXJnZXRDb21wb25lbnQgPSBsaW5lLmZpbmQoKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LmlkID09PSBuZXdEYXRhLmlkKTtcbiAgICAgIGlmICh0YXJnZXRDb21wb25lbnQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBsaW5lSW5kZXgsIGNlbGxJbmRleCB9ID0gZ2V0TWF0cml4Q29tcG9uZW50UG9zaWl0b24odGhpcy50aWxlQ29tcG9uZW50cywgdGFyZ2V0Q29tcG9uZW50KTtcbiAgICBjb25zdCBuZXdUaWxlQ29tcG9uZW50ID0gdGhpcy5jcmVhdGVUaWxlQ29tcG9uZW50KG5ld0RhdGEpO1xuICAgIHRhcmdldENvbXBvbmVudC5ub2RlLnJlcGxhY2VXaXRoKG5ld1RpbGVDb21wb25lbnQubm9kZSk7XG4gICAgdGFyZ2V0Q29tcG9uZW50LmRlc3Ryb3koKTtcbiAgICB0YXJnZXRDb21wb25lbnQgPSBudWxsO1xuICAgIHRoaXMudGlsZUNvbXBvbmVudHNbbGluZUluZGV4XVtjZWxsSW5kZXhdID0gbmV3VGlsZUNvbXBvbmVudDtcbiAgfVxuXG4gIHVuY292ZXJUaWxlKHRpbGVDb21wb25lbnQpIHtcbiAgICBpZiAodGlsZUNvbXBvbmVudC52YWx1ZSA9PT0gMCAmJiB0aWxlQ29tcG9uZW50LmlzQ292ZXJlZCkge1xuICAgICAgY29uc3QgY29tcG9uZW50UG9zaXRpb24gPSBnZXRNYXRyaXhDb21wb25lbnRQb3NpaXRvbih0aGlzLnRpbGVDb21wb25lbnRzLCB0aWxlQ29tcG9uZW50KTtcbiAgICAgIGNvbnN0IHsgY2VsbEluZGV4LCBsaW5lSW5kZXggfSA9IGNvbXBvbmVudFBvc2l0aW9uO1xuICAgICAgdGhpcy5tb2RlbC51cGRhdGVEYXRhKHsgaWQ6IHRpbGVDb21wb25lbnQuaWQsIGlzQ292ZXJlZDogZmFsc2UgfSk7XG4gICAgICBjb25zdCBzaXplID0gdGhpcy50aWxlQ29tcG9uZW50cy5sZW5ndGg7XG4gICAgICBuZWlnaGJvdXJMb2NhdGlvbk1hcC5mb3JFYWNoKChsb2NhdGlvbikgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbGluZUluZGV4ICsgbG9jYXRpb25bMF0gPj0gMCAmJlxuICAgICAgICAgIGxpbmVJbmRleCArIGxvY2F0aW9uWzBdIDwgc2l6ZSAmJlxuICAgICAgICAgIGNlbGxJbmRleCArIGxvY2F0aW9uWzFdID49IDAgJiZcbiAgICAgICAgICBjZWxsSW5kZXggKyBsb2NhdGlvblsxXSA8IHNpemVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbmVpZ2hib3VyID0gdGhpcy50aWxlQ29tcG9uZW50c1tsaW5lSW5kZXggKyBsb2NhdGlvblswXV1bY2VsbEluZGV4ICsgbG9jYXRpb25bMV1dO1xuICAgICAgICAgIHRoaXMudW5jb3ZlclRpbGUobmVpZ2hib3VyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9kZWwudXBkYXRlRGF0YSh7IGlkOiB0aWxlQ29tcG9uZW50LmlkLCBpc0NvdmVyZWQ6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNob3dNaW5lcygpIHtcbiAgICBjb25zdCBtaW5lcyA9IHRoaXMudGlsZUNvbXBvbmVudHMuZmxhdCgxKS5maWx0ZXIoKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LnZhbHVlID09PSAnKicpO1xuICAgIG1pbmVzLmZvckVhY2goKGNvbXBvbmVudCkgPT4gdGhpcy51bmNvdmVyVGlsZShjb21wb25lbnQpKTtcbiAgfVxuXG4gIHN0b3BQbGF5Z3JvdW5kRXZlbnRzKCkge1xuICAgIHRoaXMudGlsZUNvbXBvbmVudHMuZmxhdCgxKS5mb3JFYWNoKChjb21wb25lbnQpID0+IGNvbXBvbmVudC5yZW1vdmVIYW5kbGVycygpKTtcbiAgfVxuXG4gIGFwcGx5U291bmRTZXR0aW5ncygpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tdXRlKSB7XG4gICAgICB0aGlzLnNvdW5kRWZmZWN0c0NvbXBvbmVudC5tdXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc291bmRFZmZlY3RzQ29tcG9uZW50LnVubXV0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldFRpbWVyRmllbGQoeyBtaW51dGVzLCBzZWNvbmRzIH0pIHtcbiAgICB0aGlzLnBsYXlncm91bmQuZ2V0VGltZXJDb21wb25lbnQoKS5zZXRUaW1lKHsgbWludXRlcywgc2Vjb25kcyB9KTtcbiAgfVxuXG4gIHNldFN0ZXBzRmllbGQoKSB7XG4gICAgdGhpcy5wbGF5Z3JvdW5kLnNldFN0ZXBzQ29tcG9uZW50VmFsdWUodGhpcy5zdGVwcyk7XG4gIH1cblxuICBzdG9wVGltZXIoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICB9XG5cbiAgc3RhcnRUaW1lcigpIHtcbiAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnRpbWVyICs9IDE7XG4gICAgICB0aGlzLnBsYXlncm91bmQuc2V0VGltZXJWYWx1ZSh0aGlzLnRpbWVyKTtcbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIGdldE1vZGVsKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgU3ZnSWNvbnMgPSB7XG4gIERBWTogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICA8ZyBmaWxsLXJ1bGU9XCJldmVub2RkXCIgY2xpcC1wYXRoPVwidXJsKCNhKVwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICA8cGF0aCBkPVwiTTEyIDhhNCA0IDAgMSAwIDAgOCA0IDQgMCAwIDAgMC04Wm0tNiA0YTYgNiAwIDEgMSAxMiAwIDYgNiAwIDAgMS0xMiAwWk0xMiAwYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAxIDEtMiAwVjFhMSAxIDAgMCAxIDEtMVpNMTIgMjBhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDEgMS0yIDB2LTJhMSAxIDAgMCAxIDEtMVpNMy41MTMgMy41MTNhMSAxIDAgMCAxIDEuNDE0IDBsMS40MiAxLjQyYTEgMSAwIDAgMS0xLjQxNCAxLjQxNGwtMS40Mi0xLjQyYTEgMSAwIDAgMSAwLTEuNDE0Wk0xNy42NTMgMTcuNjUzYTEgMSAwIDAgMSAxLjQxNCAwbDEuNDIgMS40MmExIDEgMCAwIDEtMS40MTQgMS40MTRsLTEuNDItMS40MmExIDEgMCAwIDEgMC0xLjQxNFpNMCAxMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMSAxIDAgMkgxYTEgMSAwIDAgMS0xLTFaTTIwIDEyYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAxIDEgMCAyaC0yYTEgMSAwIDAgMS0xLTFaTTYuMzQ3IDE3LjY1M2ExIDEgMCAwIDEgMCAxLjQxNGwtMS40MiAxLjQyYTEgMSAwIDAgMS0xLjQxNC0xLjQxNGwxLjQyLTEuNDJhMSAxIDAgMCAxIDEuNDE0IDBaTTIwLjQ4NyAzLjUxM2ExIDEgMCAwIDEgMCAxLjQxNGwtMS40MiAxLjQyYTEgMSAwIDEgMS0xLjQxNC0xLjQxNGwxLjQyLTEuNDJhMSAxIDAgMCAxIDEuNDE0IDBaXCIvPlxuICA8L2c+XG4gIDxkZWZzPlxuICAgIDxjbGlwUGF0aCBpZD1cImFcIj5cbiAgICAgIDxwYXRoIGZpbGw9XCIjZmZmXCIgZD1cIk0wIDBoMjR2MjRIMHpcIi8+XG4gICAgPC9jbGlwUGF0aD5cbiAgPC9kZWZzPlxuPC9zdmc+XG5gLFxuICBMSVNUOiBgPHN2ZyB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0zLjg3ODY4IDEuODc4NjhDNC40NDEyOSAxLjMxNjA3IDUuMjA0MzUgMSA2IDFIMTRDMTQuMjY1MiAxIDE0LjUxOTYgMS4xMDUzNiAxNC43MDcxIDEuMjkyODlMMjAuNzA3MSA3LjI5Mjg5QzIwLjg5NDYgNy40ODA0MyAyMSA3LjczNDc4IDIxIDhWMjBDMjEgMjAuNzk1NyAyMC42ODM5IDIxLjU1ODcgMjAuMTIxMyAyMi4xMjEzQzE5LjU1ODcgMjIuNjgzOSAxOC43OTU3IDIzIDE4IDIzSDZDNS4yMDQzNSAyMyA0LjQ0MTI5IDIyLjY4MzkgMy44Nzg2OCAyMi4xMjEzQzMuMzE2MDcgMjEuNTU4NyAzIDIwLjc5NTcgMyAyMFY0QzMgMy4yMDQzNSAzLjMxNjA3IDIuNDQxMjkgMy44Nzg2OCAxLjg3ODY4Wk02IDNDNS43MzQ3OCAzIDUuNDgwNDMgMy4xMDUzNiA1LjI5Mjg5IDMuMjkyODlDNS4xMDUzNiAzLjQ4MDQzIDUgMy43MzQ3OCA1IDRWMjBDNSAyMC4yNjUyIDUuMTA1MzYgMjAuNTE5NiA1LjI5Mjg5IDIwLjcwNzFDNS40ODA0MyAyMC44OTQ2IDUuNzM0NzggMjEgNiAyMUgxOEMxOC4yNjUyIDIxIDE4LjUxOTYgMjAuODk0NiAxOC43MDcxIDIwLjcwNzFDMTguODk0NiAyMC41MTk2IDE5IDIwLjI2NTIgMTkgMjBWOUgxNEMxMy40NDc3IDkgMTMgOC41NTIyOCAxMyA4VjNINlpNMTUgNC40MTQyMUwxNy41ODU4IDdIMTVWNC40MTQyMVpNNyA5QzcgOC40NDc3MiA3LjQ0NzcyIDggOCA4SDEwQzEwLjU1MjMgOCAxMSA4LjQ0NzcyIDExIDlDMTEgOS41NTIyOCAxMC41NTIzIDEwIDEwIDEwSDhDNy40NDc3MiAxMCA3IDkuNTUyMjggNyA5Wk03IDEzQzcgMTIuNDQ3NyA3LjQ0NzcyIDEyIDggMTJIMTZDMTYuNTUyMyAxMiAxNyAxMi40NDc3IDE3IDEzQzE3IDEzLjU1MjMgMTYuNTUyMyAxNCAxNiAxNEg4QzcuNDQ3NzIgMTQgNyAxMy41NTIzIDcgMTNaTTcgMTdDNyAxNi40NDc3IDcuNDQ3NzIgMTYgOCAxNkgxNkMxNi41NTIzIDE2IDE3IDE2LjQ0NzcgMTcgMTdDMTcgMTcuNTUyMyAxNi41NTIzIDE4IDE2IDE4SDhDNy40NDc3MiAxOCA3IDE3LjU1MjMgNyAxN1pcIi8+XG4gIDwvc3ZnPlxuICBgLFxuICBNQVJLOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIwLjcwNyA1LjI5M2ExIDEgMCAwIDEgMCAxLjQxNGwtMTEgMTFhMSAxIDAgMCAxLTEuNDE0IDBsLTUtNWExIDEgMCAxIDEgMS40MTQtMS40MTRMOSAxNS41ODYgMTkuMjkzIDUuMjkzYTEgMSAwIDAgMSAxLjQxNCAwWlwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG48L3N2Zz5cbmAsXG4gIE1JTkU6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDxwYXRoIGZpbGw9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIi8+XG4gIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIzIDEyYTEgMSAwIDAgMS0xIDFoLTQuMDlhNS42OSA1LjY5IDAgMCAxLTEgMi40OGwuMDYuMDYgMi44MyAyLjgzYTEgMSAwIDAgMS0xLjQyIDEuNDJMMTUuNTMgMTdsLS4wNi0uMDZhNS42OSA1LjY5IDAgMCAxLTIuNDggMUEuMjguMjggMCAwIDEgMTMgMTh2NGExIDEgMCAwIDEtMiAwdi00YS4yOC4yOCAwIDAgMSAwLS4wOSA1LjY5IDUuNjkgMCAwIDEtMi40OC0xbC0uMDUuMDktMi44MyAyLjc4YTEgMSAwIDAgMS0xLjQyLTEuNDJsMi44My0yLjgzLjA2LS4wNmE1LjY5IDUuNjkgMCAwIDEtMS0yLjQ4SDJhMSAxIDAgMCAxIDAtMmg0LjA5YTUuNjkgNS42OSAwIDAgMSAxLTIuNDhsLS4wNi0uMDYtMi44MS0yLjgxYTEgMSAwIDAgMSAxLjQyLTEuNDJsMi44MyAyLjgzLjA2LjA2YTUuNjkgNS42OSAwIDAgMSAyLjQ4LTFBLjI4LjI4IDAgMCAxIDExIDZWMmExIDEgMCAwIDEgMiAwdjRhLjI4LjI4IDAgMCAxIDAgLjA5IDUuNjkgNS42OSAwIDAgMSAyLjQ4IDFsLjA2LS4wNiAyLjgzLTIuODNhMSAxIDAgMSAxIDEuNDIgMS40MkwxNyA4LjQ3bC0uMDYuMDZhNS42OSA1LjY5IDAgMCAxIDEgMi40OEgyMmExIDEgMCAwIDEgMSAuOTlaXCIvPlxuPC9zdmc+XG5gLFxuICBOSUdIVDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMi4wODEgMi41MDlhMSAxIDAgMCAxLS4wNjcgMS4wODUgNiA2IDAgMCAwIDguMzkyIDguMzkyIDEgMSAwIDAgMSAxLjU5Ljg5NkExMCAxMCAwIDEgMSAxMS4xMTggMi4wMDRhMSAxIDAgMCAxIC45NjMuNTA1Wm0tMi43NjUgMS45M2E4IDggMCAxIDAgMTAuMjQ1IDEwLjI0NUE3Ljk5OSA3Ljk5OSAwIDAgMSA5LjMxNiA0LjQzOVpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuPC9zdmc+XG5gLFxuICBTRVRUSU5HUzogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICA8ZyBmaWxsLXJ1bGU9XCJldmVub2RkXCIgY2xpcC1wYXRoPVwidXJsKCNhKVwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICA8cGF0aCBkPVwiTTEyIDEwYTIgMiAwIDEgMCAwIDQgMiAyIDAgMCAwIDAtNFptLTQgMmE0IDQgMCAxIDEgOCAwIDQgNCAwIDAgMS04IDBaXCIvPlxuICAgIDxwYXRoIGQ9XCJNMTIgMmExIDEgMCAwIDAtMSAxdi4xNzRhMi42NSAyLjY1IDAgMCAxLTEuNjA2IDIuNDI1IDEgMSAwIDAgMS0uMjY0LjA3MyAyLjY1IDIuNjUgMCAwIDEtMi43My0uNjA3bC0uMDA3LS4wMDgtLjA2LS4wNmExLjAwMyAxLjAwMyAwIDAgMC0xLjQxNSAwaC0uMDAxYTEgMSAwIDAgMCAwIDEuNDE1bC4wNjguMDY5YTIuNjUgMi42NSAwIDAgMSAuNTQyIDIuODk0IDIuNjUgMi42NSAwIDAgMS0yLjQxNCAxLjcwNUgzYTEgMSAwIDAgMCAwIDJoLjE3NGEyLjY1IDIuNjUgMCAwIDEgMi40MjMgMS42MDEgMi42NSAyLjY1IDAgMCAxLS41MzIgMi45MThsLS4wMDguMDA4LS4wNi4wNmExLjAwMyAxLjAwMyAwIDAgMC0uMjE3IDEuMDkgMSAxIDAgMCAwIC4yMTcuMzI1di4wMDFhLjk5OS45OTkgMCAwIDAgMS40MTUgMGwuMDY5LS4wNjhhMi42NSAyLjY1IDAgMCAxIDIuODk0LS41NDMgMi42NSAyLjY1IDAgMCAxIDEuNzA1IDIuNDE1VjIxYTEgMSAwIDAgMCAyIDBWMjAuODI2YTIuNjUgMi42NSAwIDAgMSAxLjYwMS0yLjQyMyAyLjY1IDIuNjUgMCAwIDEgMi45MTguNTMybC4wMDguMDA4LjA2LjA2YTEuMDAyIDEuMDAyIDAgMCAwIDEuNDE1IDBoLjAwMWExIDEgMCAwIDAgMC0xLjQxNmwtLjA2OC0uMDY4YTIuNjUgMi42NSAwIDAgMS0uNTMyLTIuOTE4QTIuNjUgMi42NSAwIDAgMSAyMC45MDYgMTNIMjFhMSAxIDAgMCAwIDAtMkgyMC44MjZhMi42NSAyLjY1IDAgMCAxLTIuNDI1LTEuNjA2Ljk5OS45OTkgMCAwIDEtLjA3My0uMjY0IDIuNjUgMi42NSAwIDAgMSAuNjA3LTIuNzNsLjAwOC0uMDA3LjA2LS4wNmExLjAwMiAxLjAwMiAwIDAgMCAwLTEuNDE1di0uMDAxYTEgMSAwIDAgMC0xLjQxNiAwbC0uMDY4LjA2OGEyLjY1IDIuNjUgMCAwIDEtMi45MTguNTMyQTIuNjUgMi42NSAwIDAgMSAxMyAzLjA5NFYzYTEgMSAwIDAgMC0xLTFaTTkuODc5Ljg3OUEzIDMgMCAwIDEgMTUgM3YuMDg3YS42NS42NSAwIDAgMCAuMzk0LjU5NGwuMDEuMDA0YS42NS42NSAwIDAgMCAuNzE0LS4xMjdsLjA1NS0uMDU1YTMgMyAwIDAgMSA0Ljg5NSAzLjI3Yy0uMTUxLjM2NS0uMzcyLjY5Ni0uNjUuOTc0bC0uMDU2LjA1NWEuNjUuNjUgMCAwIDAtLjEyNy43MTRjLjAyOC4wNjQuMDUuMTMuMDY0LjJhLjY1LjY1IDAgMCAwIC41MzQuMjg0SDIxYTMgMyAwIDEgMSAwIDZoLS4wODdhLjY1LjY1IDAgMCAwLS41OTQuMzk0bC0uMDA0LjAxYS42NS42NSAwIDAgMCAuMTI3LjcxNGwuMDU1LjA1NWEzLjAwMiAzLjAwMiAwIDAgMSAwIDQuMjQ1bC0uNzA3LS43MDguNzA3LjcwN2EzIDMgMCAwIDEtNC4yNDQgMGwtLjA1NS0uMDU1YS42NS42NSAwIDAgMC0uNzE0LS4xMjdsLS4wMS4wMDRhLjY0OS42NDkgMCAwIDAtLjM5NC41OTNWMjFhMyAzIDAgMCAxLTYgMHYtLjA3NmEuNjUuNjUgMCAwIDAtLjQyNS0uNTg1Ljk1NS45NTUgMCAwIDEtLjA1OS0uMDI0LjY1LjY1IDAgMCAwLS43MTQuMTI3bC0uMDU0LjA1NWEzLjAwMiAzLjAwMiAwIDEgMS00LjI0NS00LjI0NGwuMDU1LS4wNTVhLjY1LjY1IDAgMCAwIC4xMjctLjcxNGwtLjAwNC0uMDFhLjY0OS42NDkgMCAwIDAtLjU5NC0uMzk0SDNhMyAzIDAgMCAxIDAtNmguMDc2YS42NS42NSAwIDAgMCAuNTg1LS40MjVsLjAyNC0uMDU5YS42NS42NSAwIDAgMC0uMTI3LS43MTRsLS4wNTUtLjA1NGEzIDMgMCAxIDEgNC4yNDQtNC4yNDVsLjA1NS4wNTVhLjY1LjY1IDAgMCAwIC43MTQuMTI3IDEgMSAwIDAgMSAuMi0uMDY0QS42NS42NSAwIDAgMCA5IDMuMTY3VjNBMyAzIDAgMCAxIDkuODc5Ljg3OVpcIi8+XG4gIDwvZz5cbiAgPGRlZnM+XG4gICAgPGNsaXBQYXRoIGlkPVwiYVwiPlxuICAgICAgPHBhdGggZmlsbD1cIiNmZmZcIiBkPVwiTTAgMGgyNHYyNEgwelwiLz5cbiAgICA8L2NsaXBQYXRoPlxuICA8L2RlZnM+XG48L3N2Zz5cbmAsXG4gIE1VVEU6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTEuNDMzIDQuMDk5QTEgMSAwIDAgMSAxMiA1djE0YTEgMSAwIDAgMS0xLjYyNS43OEw1LjY1IDE2SDJhMSAxIDAgMCAxLTEtMVY5YTEgMSAwIDAgMSAxLTFoMy42NWw0LjcyNS0zLjc4YTEgMSAwIDAgMSAxLjA1OC0uMTIxWk0xMCA3LjA4bC0zLjM3NSAyLjdBMSAxIDAgMCAxIDYgMTBIM3Y0aDNhMSAxIDAgMCAxIC42MjUuMjJMMTAgMTYuOTJWNy4wOFpNMjMuNzA3IDguMjkzYTEgMSAwIDAgMSAwIDEuNDE0bC02IDZhMSAxIDAgMCAxLTEuNDE0LTEuNDE0bDYtNmExIDEgMCAwIDEgMS40MTQgMFpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xNi4yOTMgOC4yOTNhMSAxIDAgMCAxIDEuNDE0IDBsNiA2YTEgMSAwIDAgMS0xLjQxNCAxLjQxNGwtNi02YTEgMSAwIDAgMSAwLTEuNDE0WlwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG48L3N2Zz5cbmAsXG4gIFVOTVVURTogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMS40MzMgNC4wOTlhMSAxIDAgMCAxIC41NjcuOXYxNGExIDEgMCAwIDEtMS42MjUuNzgyTDUuNjUgMTZIMmExIDEgMCAwIDEtMS0xVjlhMSAxIDAgMCAxIDEtMWgzLjY1bDQuNzI1LTMuNzhhMSAxIDAgMCAxIDEuMDU4LS4xMjFaTTEwIDcuMDhsLTMuMzc1IDIuN0ExIDEgMCAwIDEgNiAxMEgzdjRoM2ExIDEgMCAwIDEgLjYyNS4yMkwxMCAxNi45MlY3LjA4Wk0xOC4zNjMgNC4yMjNhMSAxIDAgMCAxIDEuNDE0IDAgMTEgMTEgMCAwIDEgMCAxNS41NTQgMSAxIDAgMSAxLTEuNDE0LTEuNDE0IDkgOSAwIDAgMCAwLTEyLjcyNiAxIDEgMCAwIDEgMC0xLjQxNFptLTMuNTMgMy41M2ExIDEgMCAwIDEgMS40MTQgMCA2IDYgMCAwIDEgMCA4LjQ4NCAxIDEgMCAxIDEtMS40MTQtMS40MTQgNCA0IDAgMCAwIDAtNS42NTYgMSAxIDAgMCAxIDAtMS40MTRaXCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbjwvc3ZnPlxuYCxcbiAgQlVSR0VSOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIuMzU4IDEyLjA0NWExIDEgMCAwIDEgMS0xaDE4YTEgMSAwIDAgMSAwIDJoLTE4YTEgMSAwIDAgMS0xLTFaTTIuMzU4IDYuMDQ1YTEgMSAwIDAgMSAxLTFoMThhMSAxIDAgMCAxIDAgMmgtMThhMSAxIDAgMCAxLTEtMVpNMi4zNTggMTguMDQ1YTEgMSAwIDAgMSAxLTFoMThhMSAxIDAgMCAxIDAgMmgtMThhMSAxIDAgMCAxLTEtMVpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuPC9zdmc+XG5gLFxuICBUSUxFOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTE4IDVINmExIDEgMCAwIDAtMSAxdjEyYTEgMSAwIDAgMCAxIDFoMTJhMSAxIDAgMCAwIDEtMVY2YTEgMSAwIDAgMC0xLTFaTTYgM2EzIDMgMCAwIDAtMyAzdjEyYTMgMyAwIDAgMCAzIDNoMTJhMyAzIDAgMCAwIDMtM1Y2YTMgMyAwIDAgMC0zLTNINlpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPlxuPC9zdmc+XG5gLFxufTtcbiIsImltcG9ydCB7IGdldFJhbmRvbUludCB9IGZyb20gJy4uL3V0aWxzL2dldC1yYW5kb20taW50JztcbmltcG9ydCB7IG5laWdoYm91ckxvY2F0aW9uTWFwIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcblxuY29uc3QgTU9ERUxfU1RPUkFHRV9LRVkgPSAnbWluZXN3ZWVwZXJNb2RlbCc7XG5jb25zdCBNSU5FX0NIQVIgPSAnKic7XG5cbmNvbnN0IGlzTG9hZFNhdmUgPSB0cnVlO1xuXG5leHBvcnQgY2xhc3MgTWluZXN3ZWVwZXJNb2RlbCB7XG4gIGNlbGxzID0gW107XG4gIG9uRGF0YUNoYW5nZUhhbmRsZXIgPSBudWxsO1xuXG4gIHNldE1vZGVsKHNldHRpbmdzLCBzZXRaZXJvQ2VsbHMsIGNlbGxUb0lnbm9yZUNvb3JkaW5hdGVzKSB7XG4gICAgY29uc3QgaXNIYXNTYXZlID0gISF0aGlzLmxvYWRGcm9tU3RvcmFnZSgpO1xuICAgIGlmIChpc0hhc1NhdmUgJiYgaXNMb2FkU2F2ZSkge1xuICAgICAgdGhpcy5jZWxscyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTU9ERUxfU1RPUkFHRV9LRVkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jZWxscyA9IHRoaXMuZ2VuZXJhdGVDZWxsRGF0YShzZXR0aW5ncywgc2V0WmVyb0NlbGxzLCBjZWxsVG9JZ25vcmVDb29yZGluYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgc2F2ZUluU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShNT0RFTF9TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkodGhpcy5jZWxscykpO1xuICB9XG5cbiAgZXJhc2VGcm9tU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShNT0RFTF9TVE9SQUdFX0tFWSk7XG4gIH1cblxuICBsb2FkRnJvbVN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKE1PREVMX1NUT1JBR0VfS0VZKTtcbiAgfVxuXG4gIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2VsbHM7XG4gIH1cblxuICBnZW5lcmF0ZUNlbGxEYXRhKHsgYm9hcmRTaXplLCBib2FyZE1pbmVDb3VudCB9LCBzZXRaZXJvQ2VsbHMsIGNlbGxUb0lnbm9yZUNvb3JkaW5hdGVzKSB7XG4gICAgY29uc3QgbWluZU1hdHJpeCA9IG5ldyBBcnJheShib2FyZFNpemUpLmZpbGwoMCkubWFwKCgpID0+IG5ldyBBcnJheShib2FyZFNpemUpLmZpbGwoMCkpO1xuXG4gICAgaWYgKHNldFplcm9DZWxscykge1xuICAgICAgbGV0IGNlbGxDb3VudGVyID0gMDtcbiAgICAgIHJldHVybiBtaW5lTWF0cml4Lm1hcCgobGluZSkgPT4ge1xuICAgICAgICByZXR1cm4gbGluZS5tYXAoKGNlbGwpID0+IHtcbiAgICAgICAgICBjb25zdCBjZWxsRGF0YSA9IHsgaWQ6IGNlbGxDb3VudGVyLCBpc01hcmtlZDogZmFsc2UsIGlzQ292ZXJlZDogdHJ1ZSwgdmFsdWU6IGNlbGwgfTtcbiAgICAgICAgICBjZWxsQ291bnRlciArPSAxO1xuICAgICAgICAgIHJldHVybiBjZWxsRGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgbWluZUNvdW50ID0gMDtcbiAgICB3aGlsZSAobWluZUNvdW50IDwgYm9hcmRNaW5lQ291bnQpIHtcbiAgICAgIGNvbnN0IGxpbmVJbmRleCA9IGdldFJhbmRvbUludCgwLCBib2FyZFNpemUgLSAxKTtcbiAgICAgIGNvbnN0IGNlbGxJbmRleCA9IGdldFJhbmRvbUludCgwLCBib2FyZFNpemUgLSAxKTtcbiAgICAgIGlmIChtaW5lTWF0cml4W2xpbmVJbmRleF1bY2VsbEluZGV4XSAhPT0gTUlORV9DSEFSKSB7XG4gICAgICAgIGlmICghKGxpbmVJbmRleCA9PT0gY2VsbFRvSWdub3JlQ29vcmRpbmF0ZXMubGluZUluZGV4ICYmIGNlbGxJbmRleCA9PT0gY2VsbFRvSWdub3JlQ29vcmRpbmF0ZXMuY2VsbEluZGV4KSkge1xuICAgICAgICAgIG1pbmVNYXRyaXhbbGluZUluZGV4XVtjZWxsSW5kZXhdID0gTUlORV9DSEFSO1xuICAgICAgICAgIG1pbmVDb3VudCArPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGNlbGxDb3VudGVyID0gMDtcbiAgICBjb25zdCBkYXRhTWF0cml4ID0gbWluZU1hdHJpeC5tYXAoKGxpbmUsIGxpbmVJbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIGxpbmUubWFwKChjZWxsLCBjZWxsSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGNlbGwgPT09IE1JTkVfQ0hBUikge1xuICAgICAgICAgIGNvbnN0IGNlbGxEYXRhID0geyBpZDogY2VsbENvdW50ZXIsIGlzTWFya2VkOiBmYWxzZSwgaXNDb3ZlcmVkOiB0cnVlLCB2YWx1ZTogY2VsbCB9O1xuICAgICAgICAgIGNlbGxDb3VudGVyICs9IDE7XG4gICAgICAgICAgcmV0dXJuIGNlbGxEYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5laWdoYm91cnNDb3VudCA9IDA7XG4gICAgICAgIG5laWdoYm91ckxvY2F0aW9uTWFwLmZvckVhY2goKGxvY2F0aW9uKSA9PiB7XG4gICAgICAgICAgbGV0IG5laWdoYm91cjtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBsaW5lSW5kZXggKyBsb2NhdGlvblswXSA+PSAwICYmXG4gICAgICAgICAgICBsaW5lSW5kZXggKyBsb2NhdGlvblswXSA8IGJvYXJkU2l6ZSAmJlxuICAgICAgICAgICAgY2VsbEluZGV4ICsgbG9jYXRpb25bMV0gPj0gMCAmJlxuICAgICAgICAgICAgY2VsbEluZGV4ICsgbG9jYXRpb25bMV0gPCBib2FyZFNpemVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG5laWdoYm91ciA9IG1pbmVNYXRyaXhbbGluZUluZGV4ICsgbG9jYXRpb25bMF1dW2NlbGxJbmRleCArIGxvY2F0aW9uWzFdXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmVpZ2hib3Vyc0NvdW50ICs9IG5laWdoYm91ciA9PT0gTUlORV9DSEFSID8gMSA6IDA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjZWxsRGF0YSA9IHsgaWQ6IGNlbGxDb3VudGVyLCBpc01hcmtlZDogZmFsc2UsIGlzQ292ZXJlZDogdHJ1ZSwgdmFsdWU6IG5laWdoYm91cnNDb3VudCB9O1xuICAgICAgICBjZWxsQ291bnRlciArPSAxO1xuICAgICAgICByZXR1cm4gY2VsbERhdGE7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhTWF0cml4O1xuICB9XG5cbiAgdXBkYXRlRGF0YShkYXRhKSB7XG4gICAgbGV0IHRhcmdldENlbGw7XG4gICAgZm9yIChsZXQgbGluZSBvZiB0aGlzLmNlbGxzKSB7XG4gICAgICB0YXJnZXRDZWxsID0gbGluZS5maW5kKChjZWxsKSA9PiBjZWxsLmlkID09PSBkYXRhLmlkKTtcbiAgICAgIGlmICh0YXJnZXRDZWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBwcm9wIGluIGRhdGEpIHtcbiAgICAgIHRhcmdldENlbGxbcHJvcF0gPSBkYXRhW3Byb3BdICE9PSB1bmRlZmluZWQgPyBkYXRhW3Byb3BdIDogdGFyZ2V0Q2VsbFtwcm9wXTtcbiAgICB9XG4gICAgdGhpcy5vbkRhdGFDaGFuZ2VIYW5kbGVyKHRhcmdldENlbGwpO1xuICB9XG5cbiAgc2V0T25EYXRhQ2hhbmdlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5vbkRhdGFDaGFuZ2VIYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgTWluZXN3ZWVwZXJDb250cm9sbGVyIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvbWluZXN3ZWVwZXIuY29udHJvbGxlcic7XG5cbmV4cG9ydCBjbGFzcyBIb21lUGFnZSBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7fSk7XG4gICAgY29uc3QgcGFnZVdyYXBwZXIgPSBuZXcgQmFzZUNvbXBvbmVudCh7IGNsYXNzTmFtZTogJ3BhZ2Utd3JhcHBlcicgfSk7XG4gICAgdGhpcy5hcHBlbmQocGFnZVdyYXBwZXIpO1xuXG4gICAgY29uc3QgbWluZXN3ZWVwZXJDb250cm9sbGVyID0gbmV3IE1pbmVzd2VlcGVyQ29udHJvbGxlcihwYWdlV3JhcHBlcik7XG4gICAgbWluZXN3ZWVwZXJDb250cm9sbGVyLnJlbmRlcigpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgVGhlbWVWYWx1ZXMgPSB7XG4gIExJR0hUOiAnbGlnaHQnLFxuICBEQVJLOiAnZGFyaycsXG59O1xuXG5leHBvcnQgY29uc3QgU0laRV9WQVJJQU5UUyA9IFsxMCwgMTUsIDI1XTtcblxuZXhwb3J0IGNvbnN0IFdJTl9TSUdOID0gJ3dpbic7XG5leHBvcnQgY29uc3QgTE9TRV9TSUdOID0gJ2xvc2UnO1xuZXhwb3J0IGNvbnN0IFdJTl9URVhUID0gJ0hvb3JheSEgWW91IGZvdW5kIGFsbCBtaW5lcyBpbiAjIyBzZWNvbmRzIGFuZCAjTiBtb3ZlcyEnO1xuZXhwb3J0IGNvbnN0IExPU0VfVEVYVCA9ICdHYW1lIG92ZXIuIFRyeSBhZ2Fpbic7XG5cbi8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyICovXG5leHBvcnQgY29uc3QgbmVpZ2hib3VyTG9jYXRpb25NYXAgPSBbXG4gIFstMSwgLTFdLCBbLTEsICswXSwgWy0xLCArMV0sXG4gIFsrMCwgLTFdLCAvKiAgICAqLyAgWyswLCArMV0sXG4gIFsrMSwgLTFdLCBbKzEsICswXSwgWysxLCArMV0sXG5dO1xuLyogZXNsaW50LWVuYWJsZSBwcmV0dGllci9wcmV0dGllciAqL1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRGcm9tVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgcmV0dXJuIGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRNYXRyaXhDb21wb25lbnRQb3NpaXRvbihtYXRyaXgsIGNvbXBvbmVudCkge1xuICBsZXQgbGluZUluZGV4O1xuICBsZXQgY2VsbEluZGV4O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbWF0cml4Lmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAobWF0cml4W2ldW2pdID09PSBjb21wb25lbnQpIHtcbiAgICAgICAgbGluZUluZGV4ID0gaTtcbiAgICAgICAgY2VsbEluZGV4ID0gajtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGxpbmVJbmRleCwgY2VsbEluZGV4IH07XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1pbiArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSk7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAhc2NyaXB0VXJsKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0ICcuL2Fzc2V0cy9zdHlsZXMvZ2xvYmFsLXN0eWxlcy5zY3NzJztcbmltcG9ydCAnLi9hc3NldHMvZm9udHMvUm9ib3RvLVJlZ3VsYXIud29mZic7XG5pbXBvcnQgeyBIb21lUGFnZSB9IGZyb20gJy4vcGFnZXMvaG9tZSc7XG5cbmNvbnN0IGhvbWUgPSBuZXcgSG9tZVBhZ2UoKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kKGhvbWUuZ2V0RWxlbWVudCgpKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==